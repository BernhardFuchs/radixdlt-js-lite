!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["radixdlt-js-lite"]=t():e["radixdlt-js-lite"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,n){"use strict";const r=n(23),i=n(24),o=n(3),s=n(0),c=Buffer.from([0,0,255,255]),u=Buffer.from([0]),a=Symbol("permessage-deflate"),h=Symbol("write-in-progress"),l=Symbol("pending-close"),f=Symbol("total-length"),p=Symbol("callback"),d=Symbol("buffers"),b=Symbol("error");let _;function y(e){this[d].push(e),this[f]+=e.length}function v(e){this[f]+=e.length,this[a]._maxPayload<1||this[f]<=this[a]._maxPayload?this[d].push(e):(this[b]=new RangeError("Max payload size exceeded"),this[b][s.kStatusCode]=1009,this.removeListener("data",v),this.reset())}function m(e){this[a]._inflate=null,e[s.kStatusCode]=1007,this[p](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!_){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;_=new r({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate[h]?this._inflate[l]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[h]?this._deflate[l]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){_.push(r=>{this._decompress(e,t,(e,t)=>{r(),n(e,t)})})}compress(e,t,n){_.push(r=>{this._compress(e,t,(e,t)=>{r(),n(e,t)})})}_decompress(e,t,n){const r=this._isServer?"client":"server";if(!this._inflate){const e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[a]=this,this._inflate[f]=0,this._inflate[d]=[],this._inflate.on("error",m),this._inflate.on("data",v)}this._inflate[p]=n,this._inflate[h]=!0,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[b];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=o.concat(this._inflate[d],this._inflate[f]);t&&this.params[`${r}_no_context_takeover`]||this._inflate[l]?(this._inflate.close(),this._inflate=null):(this._inflate[h]=!1,this._inflate[f]=0,this._inflate[d]=[]),n(null,i)})}_compress(e,t,n){if(!e||0===e.length)return void process.nextTick(n,null,u);const r=this._isServer?"server":"client";if(!this._deflate){const e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw(Object.assign({memLevel:this._options.memLevel,level:this._options.level},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[f]=0,this._deflate[d]=[],this._deflate.on("data",y)}this._deflate[h]=!0,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{var e=o.concat(this._deflate[d],this._deflate[f]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${r}_no_context_takeover`]||this._deflate[l]?(this._deflate.close(),this._deflate=null):(this._deflate[h]=!1,this._deflate[f]=0,this._deflate[d]=[]),n(null,e)})}}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";function r(e,t){const n=Buffer.allocUnsafe(t);for(var r=0,i=0;i<e.length;i++){const t=e[i];t.copy(n,r),r+=t.length}return n}function i(e,t,n,r,i){for(var o=0;o<i;o++)n[r+o]=e[o]^t[3&o]}function o(e,t){const n=e.length;for(var r=0;r<n;r++)e[r]^=t[3&r]}try{const t=n(!function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()),s=t.BufferUtil||t;e.exports={mask(e,t,n,r,o){o<48?i(e,t,n,r,o):s.mask(e,t,n,r,o)},unmask(e,t){e.length<32?o(e,t):s.unmask(e,t)},concat:r}}catch(t){e.exports={concat:r,mask:i,unmask:o}}},function(e,t,n){"use strict";const r=n(5),i=n(2),o=n(20),s=n(6),c=n(21),u=n(22),a=n(7),h=n(1),l=n(25),f=n(8),p=n(0),d=n(9),b=n(11),_=["CONNECTING","OPEN","CLOSING","CLOSED"],y=p.kWebSocket,v=[8,13],m=3e4;class g extends r{constructor(e,t,n){super(),this.readyState=g.CONNECTING,this.protocol="",this._binaryType=p.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function(e,t,n){if(n=Object.assign({protocolVersion:v[1],perMessageDeflate:!0},n,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),-1===v.indexOf(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} `+`(supported versions: ${v.join(", ")})`);var r;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(r=e,this.url=e.href):(r=a.parse(e),this.url=e);const c="ws+unix:"===r.protocol;if(!(r.host||c&&r.pathname))throw new Error(`Invalid URL: ${this.url}`);const u="wss:"===r.protocol||"https:"===r.protocol,l=i.randomBytes(16).toString("base64"),d=u?o:s,b=r.search?`${r.pathname||"/"}${r.search}`:r.pathname||"/";var _;n.createConnection=u?x:w,n.port=r.port||(u?443:80),n.host=r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,n.headers=Object.assign({"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},n.headers),n.path=b,n.perMessageDeflate&&(_=new h(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1),n.headers["Sec-WebSocket-Extensions"]=f.format({[h.extensionName]:_.offer()}));t&&(n.headers["Sec-WebSocket-Protocol"]=t);n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin);r.auth?n.auth=r.auth:(r.username||r.password)&&(n.auth=`${r.username}:${r.password}`);if(c){const e=b.split(":");null==n.agent&&process.versions.modules<57?n._socketPath=e[0]:n.socketPath=e[0],n.path=e[1]}var y=this._req=d.get(n);n.handshakeTimeout&&y.setTimeout(n.handshakeTimeout,()=>S(this,y,"Opening handshake has timed out"));y.on("error",e=>{this._req.aborted||(y=this._req=null,this.readyState=g.CLOSING,this.emit("error",e),this.emitClose())}),y.on("response",e=>{this.emit("unexpected-response",y,e)||S(this,y,`Unexpected server response: ${e.statusCode}`)}),y.on("upgrade",(e,n,r)=>{if(this.emit("upgrade",e),this.readyState!==g.CONNECTING)return;y=this._req=null;const o=i.createHash("sha1").update(l+p.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==o)return void S(this,n,"Invalid Sec-WebSocket-Accept header");const s=e.headers["sec-websocket-protocol"],c=(t||"").split(/, */);var u;if(!t&&s?u="Server sent a subprotocol but none was requested":t&&!s?u="Server sent no subprotocol":s&&-1===c.indexOf(s)&&(u="Server sent an invalid subprotocol"),u)S(this,n,u);else{if(s&&(this.protocol=s),_)try{const t=f.parse(e.headers["sec-websocket-extensions"]);t[h.extensionName]&&(_.accept(t[h.extensionName]),this._extensions[h.extensionName]=_)}catch(e){return void S(this,n,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(n,r,0)}})}.call(this,e,t,n))}get CONNECTING(){return g.CONNECTING}get CLOSING(){return g.CLOSING}get CLOSED(){return g.CLOSED}get OPEN(){return g.OPEN}get binaryType(){return this._binaryType}set binaryType(e){p.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,n){const r=new d(this._binaryType,this._extensions,n);this._sender=new b(e,this._extensions),this._receiver=r,this._socket=e,r[y]=this,e[y]=this,r.on("conclude",k),r.on("drain",E),r.on("error",O),r.on("message",j),r.on("ping",N),r.on("pong",C),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",P),e.on("data",I),e.on("end",M),e.on("error",L),this.readyState=g.OPEN,this.emit("open")}emitClose(){this.readyState=g.CLOSED,this._socket?(this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==g.CLOSED){if(this.readyState===g.CONNECTING){const e="WebSocket was closed before the connection was established";return S(this,this._req,e)}this.readyState!==g.CLOSING?(this.readyState=g.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),m)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==g.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||p.EMPTY_BUFFER,t,n)}pong(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==g.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||p.EMPTY_BUFFER,t,n)}send(e,t,n){if("function"==typeof t&&(n=t,t={}),this.readyState!==g.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString());const r=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[h.extensionName]||(r.compress=!1),this._sender.send(e||p.EMPTY_BUFFER,r,n)}terminate(){if(this.readyState!==g.CLOSED){if(this.readyState===g.CONNECTING){const e="WebSocket was closed before the connection was established";return S(this,this._req,e)}this._socket&&(this.readyState=g.CLOSING,this._socket.destroy())}}}function w(e){return e.path=e.socketPath||e._socketPath||void 0,c.connect(e)}function x(e){return e.path=e.socketPath||e._socketPath||void 0,e.servername=e.servername||e.host,u.connect(e)}function S(e,t,n){e.readyState=g.CLOSING;const r=new Error(n);Error.captureStackTrace(r,S),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function k(e,t){const n=this[y];n._socket.removeListener("data",I),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function E(){this[y]._socket.resume()}function O(e){const t=this[y];t._socket.removeListener("data",I),t.readyState=g.CLOSING,t._closeCode=e[p.kStatusCode],t.emit("error",e),t._socket.destroy()}function T(){this[y].emitClose()}function j(e){this[y].emit("message",e)}function N(e){const t=this[y];t.pong(e,!t._isServer,p.NOOP),t.emit("ping",e)}function C(e){this[y].emit("pong",e)}function P(){const e=this[y];this.removeListener("close",P),this.removeListener("end",M),e.readyState=g.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",I),this[y]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",T),e._receiver.on("finish",T))}function I(e){this[y]._receiver.write(e)||this.pause()}function M(){const e=this[y];e.readyState=g.CLOSING,e._receiver.end(),this.end()}function L(){const e=this[y];this.removeListener("error",L),this.on("error",p.NOOP),e&&(e.readyState=g.CLOSING,this.destroy())}_.forEach((e,t)=>{g[_[t]]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(g.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var n=0;n<t.length;n++)if(t[n]._listener)return t[n]._listener},set(t){const n=this.listeners(e);for(var r=0;r<n.length;r++)n[r]._listener&&this.removeListener(e,n[r]);this.addEventListener(e,t)}})}),g.prototype.addEventListener=l.addEventListener,g.prototype.removeEventListener=l.removeEventListener,e.exports=g},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function i(e,t,n){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(n):e[t]=[n]}e.exports={format:function(e){return Object.keys(e).map(t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t={};if(void 0===e||""===e)return t;for(var n,o,s={},c=!1,u=!1,a=!1,h=-1,l=-1,f=0;f<e.length;f++){const d=e.charCodeAt(f);if(void 0===n)if(-1===l&&1===r[d])-1===h&&(h=f);else if(32===d||9===d)-1===l&&-1!==h&&(l=f);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===h)throw new SyntaxError(`Unexpected character at index ${f}`);-1===l&&(l=f);const r=e.slice(h,l);44===d?(i(t,r,s),s={}):n=r,h=l=-1}}else if(void 0===o)if(-1===l&&1===r[d])-1===h&&(h=f);else if(32===d||9===d)-1===l&&-1!==h&&(l=f);else if(59===d||44===d){if(-1===h)throw new SyntaxError(`Unexpected character at index ${f}`);-1===l&&(l=f),i(s,e.slice(h,l),!0),44===d&&(i(t,n,s),s={},n=void 0),h=l=-1}else{if(61!==d||-1===h||-1!==l)throw new SyntaxError(`Unexpected character at index ${f}`);o=e.slice(h,f),h=l=-1}else if(u){if(1!==r[d])throw new SyntaxError(`Unexpected character at index ${f}`);-1===h?h=f:c||(c=!0),u=!1}else if(a)if(1===r[d])-1===h&&(h=f);else if(34===d&&-1!==h)a=!1,l=f;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${f}`);u=!0}else if(34===d&&61===e.charCodeAt(f-1))a=!0;else if(-1===l&&1===r[d])-1===h&&(h=f);else if(-1===h||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);if(-1===h)throw new SyntaxError(`Unexpected character at index ${f}`);-1===l&&(l=f);var p=e.slice(h,l);c&&(p=p.replace(/\\/g,""),c=!1),i(s,o,p),44===d&&(i(t,n,s),s={},n=void 0),o=void 0,h=l=-1}else-1===l&&(l=f)}if(-1===h||a)throw new SyntaxError("Unexpected end of input");-1===l&&(l=f);const d=e.slice(h,l);return void 0===n?i(t,d,{}):(void 0===o?i(s,d,!0):i(s,o,c?d.replace(/\\/g,""):d),i(t,n,s)),t}}},function(e,t,n){"use strict";const r=n(26),i=n(1),o=n(3),s=n(10),c=n(0),u=0,a=1,h=2,l=3,f=4,p=5;function d(e,t,n,r){const i=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,d),i[c.kStatusCode]=r,i}function b(e,t){return 1===e.length?e[0]:e.length>1?o.concat(e,t):c.EMPTY_BUFFER}e.exports=class extends r.Writable{constructor(e,t,n){super(),this._binaryType=e||c.BINARY_TYPES[0],this[c.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=u,this._loop=!1}_write(e,t,n){if(8===this._opcode)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0];e>=n.length?this._buffers.shift().copy(t,t.length-e):(n.copy(t,t.length-e,0,e),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case u:t=this.getInfo();break;case a:t=this.getPayloadLength16();break;case h:t=this.getPayloadLength64();break;case l:this.getMask();break;case f:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,d(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,d(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,d(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,d(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,d(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,d(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,d(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,d(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,d(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=a;else{if(127!==this._payloadLength)return this.haveLength();this._state=h}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,d(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,d(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=l:this._state=f}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=f)}getData(e){var t=c.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&o.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=p,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(d(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const r=this.dataMessage();if(r)return t(r);this.startLoop(t)})}dataMessage(){if(this._fin){const t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?b(n,t):"arraybuffer"===this._binaryType?function(e){return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}(b(n,t)):n,this.emit("message",e)}else{const e=b(n,t);if(!s.isValidUTF8(e))return this._loop=!1,d(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}this._state=u}controlMessage(e){if(8!==this._opcode)9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=u;else if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return d(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!s.isValidStatusCode(t))return d(RangeError,`invalid status code ${t}`,!0,1002);const n=e.slice(2);if(!s.isValidUTF8(n))return d(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}}}},function(e,t,n){"use strict";try{const e=n(!function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}());t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t,n){"use strict";const r=n(2),i=n(1),o=n(3),s=n(10),c=n(0);class u{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=e.length<1024||t.mask&&t.readOnly;var i=t.mask?6:2,s=e.length;e.length>=65536?(i+=8,s=127):e.length>125&&(i+=2,s=126);const c=Buffer.allocUnsafe(n?e.length+i:i);if(c[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(c[0]|=64),126===s?c.writeUInt16BE(e.length,2):127===s&&(c.writeUInt32BE(0,2),c.writeUInt32BE(e.length,6)),!t.mask)return c[1]=s,n?(e.copy(c,i),[c]):[c,e];const u=r.randomBytes(4);return c[1]=128|s,c[i-4]=u[0],c[i-3]=u[1],c[i-2]=u[2],c[i-1]=u[3],n?(o.mask(e,u,c,i,e.length),[c]):(o.mask(e,u,e,0,e.length),[c,e])}close(e,t,n,r){var i;if(void 0===e)i=c.EMPTY_BUFFER;else{if("number"!=typeof e||!s.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,n,r]):this.doClose(i,n,r)}doClose(e,t,n){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){var r=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=a(e):(e=Buffer.from(e),r=!1)),this._deflating?this.enqueue([this.doPing,e,t,r,n]):this.doPing(e,t,r,n)}doPing(e,t,n,r){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),r)}pong(e,t,n){var r=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=a(e):(e=Buffer.from(e),r=!1)),this._deflating?this.enqueue([this.doPong,e,t,r,n]):this.doPong(e,t,r,n)}doPong(e,t,n,r){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),r)}send(e,t,n){var r=t.binary?2:1,o=t.compress,s=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=a(e):(e=Buffer.from(e),s=!1));const c=this._extensions[i.extensionName];if(this._firstFragment?(this._firstFragment=!1,o&&c&&(o=e.length>=c._threshold),this._compress=o):(o=!1,r=0),t.fin&&(this._firstFragment=!0),c){const i={fin:t.fin,rsv1:o,opcode:r,mask:t.mask,readOnly:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,i,n]):this.dispatch(e,this._compress,i,n)}else this.sendFrame(u.frame(e,{fin:t.fin,rsv1:!1,opcode:r,mask:t.mask,readOnly:s}),n)}dispatch(e,t,n,r){if(!t)return void this.sendFrame(u.frame(e,n),r);const o=this._extensions[i.extensionName];this._deflating=!0,o.compress(e,n.fin,(e,t)=>{n.readOnly=!1,this.sendFrame(u.frame(t,n),r),this._deflating=!1,this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function a(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(13),i={registerApp:r.registerApp,connectApp:r.connectApp};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(14)),i=s(n(15)),o=s(n(16));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"deregister",value:function(){this._connection.close()}},{key:"getWallet",value:function(){return this._connection?new r.default(this._connection):null}},{key:"getMessaging",value:function(){return this._connection?new i.default(this._connection):null}},{key:"getAddress",value:function(){return this._connection.pushRequest({jsonrpc:"2.0",method:"address",params:{},id:1}),this._connection.getAddress}},{key:"token",get:function(){return this._connection.token}}]),e}();var a={registerApp:function(e,t,n){var r=new o.default;return new Promise(function(i,o){r.register(e,t,n).then(function(){return i(new u(r))}).catch(function(e){return o(e)})})},connectApp:function(e){var t=new o.default;return new Promise(function(n,r){t.connect(e).then(function(){return n(new u(t))}).catch(function(e){return r(e)})})}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"getBalance",value:function(){return this._connection.pushRequest({jsonrpc:"2.0",method:"balance",params:{},id:2}),this._connection.getBalance}},{key:"sendTransaction",value:function(e,t,n,r){var i={recipient:e,asset:t,quantity:n,message:r};return this._connection.pushRequest({jsonrpc:"2.0",method:"send_transaction",params:i,id:3}),this._connection.sendTransaction}},{key:"getTransactions",value:function(){return this._connection.pushRequest({jsonrpc:"2.0",method:"transactions",params:{},id:4}),this._connection.getTransactions}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"sendMessage",value:function(e,t){var n={recipient:e,message:t};return this._connection.pushRequest({jsonrpc:"2.0",method:"send_message",params:n,id:5}),this._connection.sendMessage}},{key:"getMessages",value:function(){return this._connection.pushRequest({jsonrpc:"2.0",method:"messages",params:{},id:6}),this._connection.getMessages}},{key:"sendApplicationMessage",value:function(e,t,n,r){var i={application_id:e,recipients:t,payload:n,encrypted:r};return this._connection.pushRequest({jsonrpc:"2.0",method:"send_application_message",params:i,id:7}),this._connection.sendApplicationMessage}},{key:"getApplicationMessages",value:function(e){var t={application_id:e};return this._connection.pushRequest({jsonrpc:"2.0",method:"application_messages",params:t,id:8}),this._connection.getApplicationMessages}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(17);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=global.WebSocket||global.MozWebSocket||n(19),p=function(e){function t(){var e;return o(this,t),(e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)))._items=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r.Subject),c(t,[{key:"add",value:function(e){this.observers.length>0?this.next(e):this._items.push(e)}},{key:"subscribe",value:function(e){var n=this,r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,e);return this._items.forEach(function(e){return n.next(e)}),this._items=[],r}}]),t}(),d=function(){function e(){o(this,e),this._token=new r.Subject,this._messages=new p,this._getAddress=new r.Subject,this._getBalance=new r.Subject,this._sendTransaction=new r.Subject,this._getTransactions=new r.Subject,this._sendMessage=new r.Subject,this._getMessages=new r.Subject,this._sendApplicationMessage=new r.Subject,this._getApplicationMessages=new r.Subject}return c(e,[{key:"register",value:function(e,t,n){var r=this,i=JSON.stringify({jsonrpc:"2.0",method:"register",params:{name:e,description:t,permissions:n},id:0});return new Promise(function(e,t){r._socket=new f("ws://localhost:54345"),r._socket.onopen=function(){return r.handleOpen(i,e,t)},r._socket.onmessage=function(e){return r.handleResponse(e.data)},r._socket.onerror=function(e){return t("WebSocket Error: ".concat(JSON.stringify(e)))},r._socket.onclose=function(){return r.handleClose()}})}},{key:"connect",value:function(e){var t=this,n=JSON.stringify({jsonrpc:"2.0",method:"ping",params:{token:e},id:9});return this._tokenValue=e,new Promise(function(e,r){t._socket=new f("ws://localhost:54345"),t._socket.onopen=function(){return t.handleOpen(n,e,r)},t._socket.onmessage=function(e){return t.handleResponse(e.data)},t._socket.onerror=function(e){return r("WebSocket Error: ".concat(JSON.stringify(e)))},t._socket.onclose=function(){return t.handleClose()}})}},{key:"handleOpen",value:function(e,t,n){var r=this;this._socket.send(e),this._token.subscribe(function(e){t(),r._tokenValue=e,r._messages.subscribe(function(t){t.params.token=e,t=JSON.stringify(t),r._socket.send(t)})},function(e){return n(e)})}},{key:"handleResponse",value:function(e){(e=JSON.parse(e)).hasOwnProperty("result")||e.hasOwnProperty("params")?this.getResponse(e):this.getError(e)}},{key:"getResponse",value:function(e){switch(e.id){case 0:this._token.next(e.result.token);break;case 1:this._getAddress.next(e.result);break;case 2:case 4:case 6:case 8:break;case 3:this._sendTransaction.next(e.result);break;case 5:this._sendMessage.next(e.result);break;case 7:this._sendApplicationMessage.next(e.result);break;case 9:this._token.next(this._tokenValue);break;default:switch(e.method){case"balance.update":this._getBalance.next(e.params.TEST);break;case"transaction.update":this._getTransactions.next(e.params);break;case"message.update":this._getMessages.next(e.params);break;case"application_message.update":this._getApplicationMessages.next(e.params);break;default:console.log("The method is not supported")}}}},{key:"getError",value:function(e){switch(e.id){case 0:this._token.error(e.error);break;case 1:this._getAddress.error(e.error);break;case 2:case 4:case 6:case 8:break;case 3:this._sendTransaction.error(e.error);break;case 5:this._sendMessage.error(e.error);break;case 7:this._sendApplicationMessage.error(e.error);break;case 9:this._token.error(e.error);break;default:console.log("The method is not supported")}}},{key:"handleClose",value:function(){this._token.unsubscribe(),this._messages.unsubscribe()}},{key:"pushRequest",value:function(e){this._messages.add(e)}},{key:"close",value:function(){var e=this;setTimeout(function(){1===e._socket.readyState&&e._socket.close()},2e3)}},{key:"getAddress",get:function(){return this._getAddress}},{key:"getBalance",get:function(){return this._getBalance}},{key:"sendTransaction",get:function(){return this._sendTransaction}},{key:"getTransactions",get:function(){return this._getTransactions}},{key:"sendMessage",get:function(){return this._sendMessage}},{key:"getMessages",get:function(){return this._getMessages}},{key:"sendApplicationMessage",get:function(){return this._sendApplicationMessage}},{key:"getApplicationMessages",get:function(){return this._getApplicationMessages}},{key:"token",get:function(){return this._tokenValue}}]),e}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(18))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28);t.Subject=r.Subject},function(e,t,n){"use strict";const r=n(4);r.Server=n(27),r.Receiver=n(9),r.Sender=n(11),e.exports=r},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){r.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),r.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},r.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=r},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";class r{constructor(e,t){this.target=t,this.type=e}}class i extends r{constructor(e,t){super("message",t),this.data=e}}class o extends r{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class s extends r{constructor(e){super("open",e)}}class c extends r{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const u={addEventListener(e,t){function n(e){t.call(this,new i(e,this))}function r(e,n){t.call(this,new o(e,n,this))}function u(e){t.call(this,new c(e,this))}function a(){t.call(this,new s(this))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(r._listener=t,this.on(e,r)):"error"===e?(u._listener=t,this.on(e,u)):"open"===e?(a._listener=t,this.on(e,a)):this.on(e,t))},removeEventListener(e,t){const n=this.listeners(e);for(var r=0;r<n.length;r++)n[r]!==t&&n[r]._listener!==t||this.removeListener(e,n[r])}};e.exports=u},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";const r=n(5),i=n(2),o=n(6),s=n(7),c=n(1),u=n(8),a=n(0),h=n(4);function l(){this.destroy()}function f(e,t,n,r){e.writable&&(n=n||o.STATUS_CODES[t],r=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(n)},r),e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(r).map(e=>`${e}: ${r[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",l),e.destroy()}e.exports=class extends r{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=o.createServer((e,t)=>{const n=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,n)=>{this.handleUpgrade(e,t,n,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port))return t.close(e);e&&e()}shouldHandle(e){return!this.options.path||s.parse(e.url).pathname===this.options.path}handleUpgrade(e,t,n,r){t.on("error",l);const i=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return f(t,400);if(this.options.perMessageDeflate){const n=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const r=u.parse(e.headers["sec-websocket-extensions"]);r[c.extensionName]&&(n.accept(r[c.extensionName]),o[c.extensionName]=n)}catch(e){return f(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(i,s,c,u)=>{if(!i)return f(t,s||401,c,u);this.completeUpgrade(o,e,t,n,r)});if(!this.options.verifyClient(s))return f(t,401)}this.completeUpgrade(o,e,t,n,r)}completeUpgrade(e,t,n,r,o){if(!n.readable||!n.writable)return n.destroy();const s=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i.createHash("sha1").update(t.headers["sec-websocket-key"]+a.GUID,"binary").digest("base64")}`],f=new h(null);var p=t.headers["sec-websocket-protocol"];if(p&&(p=p.trim().split(/ *, */),(p=this.options.handleProtocols?this.options.handleProtocols(p,t):p[0])&&(s.push(`Sec-WebSocket-Protocol: ${p}`),f.protocol=p)),e[c.extensionName]){const t=e[c.extensionName].params,n=u.format({[c.extensionName]:[t]});s.push(`Sec-WebSocket-Extensions: ${n}`),f._extensions=e}this.emit("headers",s,t),n.write(s.concat("\r\n").join("\r\n")),n.removeListener("error",l),f.setSocket(n,r,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on("close",()=>this.clients.delete(f))),o(f)}}},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){return"function"==typeof e}var s=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function u(e){setTimeout(function(){throw e})}var a={closed:!0,next:function(e){},error:function(e){if(c.useDeprecatedSynchronousErrorHandling)throw e;u(e)},complete:function(){}},h=Array.isArray||function(e){return e&&"number"==typeof e.length};function l(e){return null!=e&&"object"==typeof e}var f,p={e:{}};function d(){try{return f.apply(this,arguments)}catch(e){return p.e=e,p}}function b(e){return f=e,d}var _=function(e){function t(n){var r=e.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t}(Error),y=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var c=-1,u=r?r.length:0;n;)n.remove(this),n=++c<u&&r[c]||null;if(o(i))b(i).call(this)===p&&(t=!0,e=e||(p.e instanceof _?v(p.e.errors):[p.e]));if(h(s))for(c=-1,u=s.length;++c<u;){var a=s[c];if(l(a))if(b(a.unsubscribe).call(a)===p){t=!0,e=e||[];var f=p.e;f instanceof _?e=e.concat(v(f.errors)):e.push(f)}}if(t)throw new _(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function v(e){return e.reduce(function(e,t){return e.concat(t instanceof _?t.errors:t)},[])}var m="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",g=function(e){function t(t,n,r){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=a;break;case 1:if(!t){i.destination=a;break}if("object"==typeof t){if(function(e){return e instanceof g||"syncErrorThrowable"in e&&e[m]}(t)){var o=t[m]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o.add(i)}else i.syncErrorThrowable=!0,i.destination=new w(i,t);break}default:i.syncErrorThrowable=!0,i.destination=new w(i,t,n,r)}return i}return i(t,e),t.prototype[m]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(y),w=function(e){function t(t,n,r,i){var s,c=e.call(this)||this;c._parentSubscriber=t;var u=c;return o(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==a&&(o((u=Object.create(n)).unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=s,c._error=r,c._complete=i,c}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):u(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;u(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw e;u(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return c.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(u(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(g);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E(e)}function E(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:S}var O=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[m])return e[m]()}return e||t||n?new g(e,t,n):new g(a)}(e,t,n);if(r?r.call(i,this.source):i.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=T(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[x]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:E(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=T(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function T(e){if(e||(e=c.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var j=function(e){function t(){var n=e.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(Error),N=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(y),C=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(g),P=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[m]=function(){return new C(this)},t.prototype.lift=function(e){var t=new I(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new j;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new j;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new j;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new j;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new j;return this.hasError?(e.error(this.thrownError),y.EMPTY):this.isStopped?(e.complete(),y.EMPTY):(this.observers.push(e),new N(this,e))},t.prototype.asObservable=function(){var e=new O;return e.source=this,e},t.create=function(e,t){return new I(e,t)},t}(O),I=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):y.EMPTY},t}(P);var M=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new L(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),L=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(g),A=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new y).add(this.source.subscribe(new U(this.getSubject(),this))),e.closed?(this._connection=null,e=y.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return function(e){return e.lift(new M(e))}(this)},t}(O),B=A.prototype,U=(B._subscribe,B._isComplete,B.getSubject,B.connect,B.refCount,function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(C));var F=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return i(t,e),t.prototype._subscribe=function(e){var t=new y,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new R(n)),t.add(r.subscribe(e)),t},t}(O),R=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(y),V=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new j;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(P),W=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(y)),q=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(W),$=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),D=function(e){function t(n,r){void 0===r&&(r=$.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}($),Y=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(D))(q),G=new O(function(e){return e.complete()});function H(e){return e?function(e){return new O(function(t){return e.schedule(function(){return t.complete()})})}(e):G}function z(e){return e&&"function"==typeof e.schedule}var J=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}};function Z(e,t){return new O(t?function(n){var r=new y,i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:J(e))}function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(z(n)?e.pop():n=void 0,e.length){case 0:return H(n);case 1:return n?Z(e,n):function(e){var t=new O(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}(e[0]);default:return Z(e,n)}}function Q(e,t){return new O(t?function(n){return t.schedule(X,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function X(e){var t=e.error;e.subscriber.error(t)}var ee=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return K(this.value);case"E":return Q(this.error);case"C":return H()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var te=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new ne(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(ee.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(ee.createError(e))},t.prototype._complete=function(){this.scheduleMessage(ee.createComplete())},t}(g),ne=function(){return function(e,t){this.notification=e,this.destination=t}}(),re=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new ie(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new j;if(this.isStopped||this.hasError?t=y.EMPTY:(this.observers.push(e),t=new N(this,e)),i&&e.add(e=new te(e,i)),n)for(var s=0;s<o&&!e.closed;s++)e.next(r[s]);else for(s=0;s<o&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||Y).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(P),ie=function(){return function(e,t){this.time=e,this.value=t}}(),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),y.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),y.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(P),se=1,ce={};var ue=function(e){var t=se++;return ce[t]=e,Promise.resolve().then(function(){return function(e){var t=ce[e];t&&t()}(t)}),t},ae=function(e){delete ce[e]},he=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=ue(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(ae(n),t.scheduled=void 0)},t}(W),le=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(D))(he),fe=new D(W),pe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(W),de=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(D))(pe),be=function(e){function t(t,n){void 0===t&&(t=_e),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n.shift())&&(this.frame=t.delay)<=r&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(D),_e=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(W);function ye(e){return e}function ve(e){return!!e&&(e instanceof O||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var me=function(e){function t(){var n=e.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(Error),ge=function(e){function t(){var n=e.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(Error),we=function(e){function t(){var n=e.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(Error);function xe(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Se(e,t))}}var Se=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ke(e,this.project,this.thisArg))},e}(),ke=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g);function Ee(e,t,n){if(t){if(!z(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ee(e,n).apply(void 0,r).pipe(xe(function(e){return h(e)?t.apply(void 0,e):t(e)}))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:n};return new O(function(r){if(n){var c={args:t,subscriber:r,params:s};return n.schedule(Oe,0,c)}if(!i){i=new oe;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){i.error(e)}}return i.subscribe(r)})}}function Oe(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,c=i.scheduler,u=i.subject;if(!u){u=i.subject=new oe;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(c.schedule(Te,0,{value:r,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(r))}function Te(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function je(e,t,n){if(t){if(!z(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return je(e,n).apply(void 0,r).pipe(xe(function(e){return h(e)?t.apply(void 0,e):t(e)}))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new O(function(r){var o=i.context,s=i.subject;if(n)return n.schedule(Ne,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new oe;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){s.error(e)}}return s.subscribe(r)})}}function Ne(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,s=n.args,c=n.scheduler,u=n.subject;if(!u){u=n.subject=new oe;try{o.apply(i,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(c.schedule(Pe,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(c.schedule(Ce,0,{value:i,subject:u}))}}]))}catch(e){this.add(c.schedule(Pe,0,{err:e,subject:u}))}}this.add(u.subscribe(r))}function Ce(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Pe(e){var t=e.err;e.subject.error(t)}var Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(g),Me=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(g),Le=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,u),t}};var Ae=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Be=function(e){return function(t){for(var n=e[Ae]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}},Ue=function(e){return function(t){var n=e[x]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Fe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Re(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ve=function(e){if(e instanceof O)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[x])return Ue(e);if(Fe(e))return J(e);if(Re(e))return Le(e);if(e&&"function"==typeof e[Ae])return Be(e);var t=l(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function We(e,t,n,r){var i=new Me(e,n,r);return Ve(t)(i)}var qe={};function $e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return z(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&h(e[0])&&(e=e[0]),Z(e,r).lift(new De(n))}var De=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ye(e,this.resultSelector))},e}(),Ye=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(t,e),t.prototype._next=function(e){this.values.push(qe),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(We(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],c=this.toRespond?s===qe?--this.toRespond:this.toRespond:0;o[n]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ie);function Ge(e,t){if(!t)return e instanceof O?e:new O(Ve(e));if(null!=e){if(function(e){return e&&"function"==typeof e[x]}(e))return function(e,t){return new O(t?function(n){var r=new y;return r.add(t.schedule(function(){var i=e[x]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:Ue(e))}(e,t);if(Re(e))return function(e,t){return new O(t?function(n){var r=new y;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:Le(e))}(e,t);if(Fe(e))return Z(e,t);if(function(e){return e&&"function"==typeof e[Ae]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new O(t?function(n){var r,i=new y;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[Ae](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i}:Be(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}var He=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new ze(e,this.project,this.concurrent))},e}(),ze=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(We(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ie);function Je(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(e(function(e,r){return Ge(t(e,r)).pipe(xe(function(t,i){return n(e,t,r,i)}))},r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new He(t,r))})}(ye,e)}function Ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&z(e[1])?Ge(e[0]):Je(1)(K.apply(void 0,e))}function Ke(e){return new O(function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Ge(n):H()).subscribe(t)})}function Qe(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),0===t.length?G:e?Qe(t).pipe(xe(function(t){return e.apply(void 0,t)})):new O(function(e){return new Xe(e,t)})}var Xe=function(e){function t(t,n){var r=e.call(this,t)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var s=We(r,n[o],null,o);s&&r.add(s)}return r}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.values,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()},t}(Ie);Object.prototype.toString;function et(e,t,n,r){return o(n)&&(r=n,n=void 0),r?et(e,t,n).pipe(xe(function(e){return h(e)?r.apply(void 0,e):r(e)})):new O(function(r){!function e(t,n,r,i,o){var s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var c=t;t.addEventListener(n,r,o),s=function(){return c.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),s=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var a=t;t.addListener(n,r),s=function(){return a.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var h=0,l=t.length;h<l;h++)e(t[h],n,r,i,o)}i.add(s)}(e,t,function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)},r,n)})}function tt(e,t,n){return n?tt(e,t).pipe(xe(function(e){return h(e)?n.apply(void 0,e):n(e)})):new O(function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(o(t))return function(){return t(i,r)}})}function nt(e,t,n,r,i){var o,s;if(1==arguments.length){var c=e;s=c.initialState,t=c.condition,n=c.iterate,o=c.resultSelector||ye,i=c.scheduler}else void 0===r||z(r)?(s=e,o=ye,i=r):(s=e,o=r);return new O(function(e){var r=s;if(i)return i.schedule(rt,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:r});for(;;){if(t){var c=void 0;try{c=t(r)}catch(t){return void e.error(t)}if(!c){e.complete();break}}var u=void 0;try{u=o(r)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}})}function rt(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function it(e,t,n){return void 0===t&&(t=G),void 0===n&&(n=G),Ke(function(){return e()?t:n})}function ot(e){return!h(e)&&e-parseFloat(e)+1>=0}function st(e,t){return void 0===e&&(e=0),void 0===t&&(t=fe),(!ot(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=fe),new O(function(n){return n.add(t.schedule(ct,e,{subscriber:n,counter:0,period:e})),n})}function ct(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function ut(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return z(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof O?e[0]:Je(n)(Z(e,r))}var at=new O(S);function ht(){return at}function lt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return G;var n=e[0],r=e.slice(1);return 1===e.length&&h(n)?lt.apply(void 0,n):new O(function(e){var t=function(){return e.add(lt.apply(void 0,r).subscribe(e))};return Ge(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function ft(e,t){return new O(t?function(n){var r=Object.keys(e),i=new y;return i.add(t.schedule(pt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function pt(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!h(e[0]))return e[0];e=e[0]}return Z(e,void 0).lift(new bt)}var bt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new _t(e))},e}(),_t=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=We(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(Ie);function yt(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),new O(function(r){var i=0,o=e;if(n)return n.schedule(vt,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}})}function vt(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function mt(e,t,n){void 0===e&&(e=0);var r=-1;return ot(t)?r=Number(t)<1?1:Number(t):z(t)&&(n=t),z(n)||(n=fe),new O(function(t){var i=ot(e)?e:+e-n.now();return n.schedule(gt,i,{index:0,period:r,subscriber:t})})}function gt(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function wt(e,t){return new O(function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?Ge(i):G).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function xt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Z(e,void 0).lift(new St(n))}var St=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new kt(e,this.resultSelector))},e}(),kt=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;h(e)?t.push(new Ot(e)):"function"==typeof e[Ae]?t.push(new Et(e[Ae]())):t.push(new Tt(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var s,c=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),c.done)return void n.complete();o.push(c.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g),Et=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),Ot=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Ae]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Tt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[Ae]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return We(this,this.observable,this,t)},t}(Ie);n.d(t,"Observable",function(){return O}),n.d(t,"ConnectableObservable",function(){return A}),n.d(t,"GroupedObservable",function(){return F}),n.d(t,"observable",function(){return x}),n.d(t,"Subject",function(){return P}),n.d(t,"BehaviorSubject",function(){return V}),n.d(t,"ReplaySubject",function(){return re}),n.d(t,"AsyncSubject",function(){return oe}),n.d(t,"asapScheduler",function(){return le}),n.d(t,"asyncScheduler",function(){return fe}),n.d(t,"queueScheduler",function(){return Y}),n.d(t,"animationFrameScheduler",function(){return de}),n.d(t,"VirtualTimeScheduler",function(){return be}),n.d(t,"VirtualAction",function(){return _e}),n.d(t,"Scheduler",function(){return $}),n.d(t,"Subscription",function(){return y}),n.d(t,"Subscriber",function(){return g}),n.d(t,"Notification",function(){return ee}),n.d(t,"pipe",function(){return k}),n.d(t,"noop",function(){return S}),n.d(t,"identity",function(){return ye}),n.d(t,"isObservable",function(){return ve}),n.d(t,"ArgumentOutOfRangeError",function(){return me}),n.d(t,"EmptyError",function(){return ge}),n.d(t,"ObjectUnsubscribedError",function(){return j}),n.d(t,"UnsubscriptionError",function(){return _}),n.d(t,"TimeoutError",function(){return we}),n.d(t,"bindCallback",function(){return Ee}),n.d(t,"bindNodeCallback",function(){return je}),n.d(t,"combineLatest",function(){return $e}),n.d(t,"concat",function(){return Ze}),n.d(t,"defer",function(){return Ke}),n.d(t,"empty",function(){return H}),n.d(t,"forkJoin",function(){return Qe}),n.d(t,"from",function(){return Ge}),n.d(t,"fromEvent",function(){return et}),n.d(t,"fromEventPattern",function(){return tt}),n.d(t,"generate",function(){return nt}),n.d(t,"iif",function(){return it}),n.d(t,"interval",function(){return st}),n.d(t,"merge",function(){return ut}),n.d(t,"never",function(){return ht}),n.d(t,"of",function(){return K}),n.d(t,"onErrorResumeNext",function(){return lt}),n.d(t,"pairs",function(){return ft}),n.d(t,"race",function(){return dt}),n.d(t,"range",function(){return yt}),n.d(t,"throwError",function(){return Q}),n.d(t,"timer",function(){return mt}),n.d(t,"using",function(){return wt}),n.d(t,"zip",function(){return xt}),n.d(t,"EMPTY",function(){return G}),n.d(t,"NEVER",function(){return at}),n.d(t,"config",function(){return c})}])});
//# sourceMappingURL=radixdlt-js-lite.min.js.map