{"version":3,"sources":["webpack://radixdlt-js-lite/webpack/universalModuleDefinition","webpack://radixdlt-js-lite/webpack/bootstrap","webpack://radixdlt-js-lite/./node_modules/async-limiter/index.js","webpack://radixdlt-js-lite/src/compat/Subject.ts","webpack://radixdlt-js-lite/src/Subject.ts","webpack://radixdlt-js-lite/../src/index.ts","webpack://radixdlt-js-lite/../../src/internal/AsyncSubject.ts","webpack://radixdlt-js-lite/../../src/internal/BehaviorSubject.ts","webpack://radixdlt-js-lite/../../src/internal/InnerSubscriber.ts","webpack://radixdlt-js-lite/../../src/internal/Notification.ts","webpack://radixdlt-js-lite/../../src/internal/Observable.ts","webpack://radixdlt-js-lite/../../src/internal/Observer.ts","webpack://radixdlt-js-lite/../../src/internal/OuterSubscriber.ts","webpack://radixdlt-js-lite/../../src/internal/ReplaySubject.ts","webpack://radixdlt-js-lite/../../src/internal/Scheduler.ts","webpack://radixdlt-js-lite/../../src/internal/Subject.ts","webpack://radixdlt-js-lite/../../src/internal/SubjectSubscription.ts","webpack://radixdlt-js-lite/../../src/internal/Subscriber.ts","webpack://radixdlt-js-lite/../../src/internal/Subscription.ts","webpack://radixdlt-js-lite/../../src/internal/config.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/ConnectableObservable.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/bindCallback.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/bindNodeCallback.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/combineLatest.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/concat.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/defer.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/empty.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/forkJoin.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/from.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/fromArray.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/fromEvent.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/fromEventPattern.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/fromIterable.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/fromObservable.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/fromPromise.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/generate.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/iif.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/interval.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/merge.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/never.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/of.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/onErrorResumeNext.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/pairs.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/race.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/range.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/scalar.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/throwError.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/timer.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/using.ts","webpack://radixdlt-js-lite/../../../src/internal/observable/zip.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/concatAll.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/groupBy.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/map.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/mergeAll.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/mergeMap.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/observeOn.ts","webpack://radixdlt-js-lite/../../../src/internal/operators/refCount.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/Action.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/AnimationFrameAction.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/AnimationFrameScheduler.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/AsapAction.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/AsapScheduler.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/AsyncAction.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/AsyncScheduler.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/QueueAction.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/QueueScheduler.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/VirtualTimeScheduler.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/animationFrame.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/asap.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/async.ts","webpack://radixdlt-js-lite/../../../src/internal/scheduler/queue.ts","webpack://radixdlt-js-lite/../../../src/internal/symbol/iterator.ts","webpack://radixdlt-js-lite/../../../src/internal/symbol/rxSubscriber.ts","webpack://radixdlt-js-lite/../../../src/internal/util/ArgumentOutOfRangeError.ts","webpack://radixdlt-js-lite/../../../src/internal/util/EmptyError.ts","webpack://radixdlt-js-lite/../../../src/internal/util/Immediate.ts","webpack://radixdlt-js-lite/../../../src/internal/util/ObjectUnsubscribedError.ts","webpack://radixdlt-js-lite/../../../src/internal/util/TimeoutError.ts","webpack://radixdlt-js-lite/../../../src/internal/util/UnsubscriptionError.ts","webpack://radixdlt-js-lite/../../../src/internal/util/hostReportError.ts","webpack://radixdlt-js-lite/../../../src/internal/util/identity.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isFunction.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isInteropObservable.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isIterable.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isNumeric.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isObject.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isObservable.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isPromise.ts","webpack://radixdlt-js-lite/../../../src/internal/util/isScheduler.ts","webpack://radixdlt-js-lite/../../../src/internal/util/pipe.ts","webpack://radixdlt-js-lite/../../../src/internal/util/subscribeTo.ts","webpack://radixdlt-js-lite/../../../src/internal/util/subscribeToArray.ts","webpack://radixdlt-js-lite/../../../src/internal/util/subscribeToIterable.ts","webpack://radixdlt-js-lite/../../../src/internal/util/subscribeToObservable.ts","webpack://radixdlt-js-lite/../../../src/internal/util/subscribeToPromise.ts","webpack://radixdlt-js-lite/../../../src/internal/util/subscribeToResult.ts","webpack://radixdlt-js-lite/../../../src/internal/util/toSubscriber.ts","webpack://radixdlt-js-lite/../../../src/internal/util/tryCatch.ts","webpack://radixdlt-js-lite/./node_modules/tslib/tslib.es6.js","webpack://radixdlt-js-lite/./node_modules/ws/index.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/buffer-util.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/constants.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/event-target.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/extension.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/permessage-deflate.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/receiver.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/sender.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/validation.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/websocket-server.js","webpack://radixdlt-js-lite/./node_modules/ws/lib/websocket.js","webpack://radixdlt-js-lite/./src/connection-handler.js","webpack://radixdlt-js-lite/./src/connection.js","webpack://radixdlt-js-lite/./src/index.js","webpack://radixdlt-js-lite/./src/messaging.js","webpack://radixdlt-js-lite/./src/wallet.js","webpack://radixdlt-js-lite/external \"crypto\"","webpack://radixdlt-js-lite/external \"events\"","webpack://radixdlt-js-lite/external \"http\"","webpack://radixdlt-js-lite/external \"https\"","webpack://radixdlt-js-lite/external \"net\"","webpack://radixdlt-js-lite/external \"stream\"","webpack://radixdlt-js-lite/external \"tls\"","webpack://radixdlt-js-lite/external \"url\"","webpack://radixdlt-js-lite/external \"zlib\""],"names":["Queue","options","concurrency","Infinity","pending","jobs","cbs","_done","done","bind","arrayAddMethods","forEach","method","prototype","methodResult","Array","apply","arguments","_run","Object","defineProperty","get","length","job","shift","cb","pop","process","nextTick","onDone","push","module","exports","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","s","i","n","call","__rest","e","indexOf","getOwnPropertySymbols","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","__exportStar","m","__values","o","__read","ar","error","__spread","concat","__await","__asyncGenerator","asyncIterator","q","a","resume","settle","fulfill","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","k","default","__importDefault","WebSocket","require","Server","Receiver","Sender","list","totalLength","Buffer","allocUnsafe","offset","buf","copy","_mask","source","mask","output","_unmask","buffer","bufferUtil","bu","BufferUtil","unmask","BINARY_TYPES","GUID","kStatusCode","kWebSocket","EMPTY_BUFFER","alloc","NOOP","Event","type","MessageEvent","data","CloseEvent","code","reason","wasClean","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","message","EventTarget","addEventListener","listener","onMessage","onClose","onError","onOpen","_listener","on","removeEventListener","listeners","removeListener","tokenChars","dest","name","elem","parse","header","offers","undefined","params","mustUnescape","isEscaping","inQuotes","extensionName","paramName","start","end","charCodeAt","SyntaxError","slice","replace","token","format","extensions","keys","map","extension","configurations","isArray","values","join","Limiter","zlib","constants","TRAILER","from","EMPTY_BLOCK","kPerMessageDeflate","kWriteInProgress","kPendingClose","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","PerMessageDeflate","isServer","maxPayload","_maxPayload","_options","_threshold","threshold","_isServer","_deflate","_inflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","cleanup","close","opts","accepted","find","Error","response","num","Number","isInteger","decompress","fin","callback","_decompress","err","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","inflateOnError","inflateOnData","write","flush","createDeflateRaw","memLevel","level","zlibDeflateOptions","deflateOnData","Z_SYNC_FLUSH","chunk","RangeError","reset","stream","validation","GET_INFO","GET_PAYLOAD_LENGTH_16","GET_PAYLOAD_LENGTH_64","GET_MASK","GET_DATA","INFLATING","Writable","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","_write","encoding","startLoop","consume","dst","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","readUInt16BE","readUInt32BE","Math","pow","controlMessage","dataMessage","perMessageDeflate","er","messageLength","fragments","toBuffer","toArrayBuffer","emit","isValidUTF8","toString","isValidStatusCode","ErrorCtor","prefix","statusCode","captureStackTrace","byteOffset","byteLength","crypto","socket","_socket","_firstFragment","_deflating","_queue","frame","merge","readOnly","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","randomBytes","enqueue","doClose","sendFrame","ping","isBuffer","ArrayBuffer","isView","viewToBuffer","doPing","pong","doPong","send","binary","dispatch","dequeue","view","Validation","EventEmitter","http","url","WebSocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","server","host","path","port","_server","createServer","req","res","STATUS_CODES","writeHead","listen","_removeListeners","addListeners","listening","upgrade","head","handleUpgrade","ws","clients","Set","address","client","terminate","shouldHandle","pathname","socketOnError","version","headers","toLowerCase","abortHandshake","info","origin","secure","connection","authorized","encrypted","verified","completeUpgrade","readable","writable","destroy","createHash","update","digest","protocol","trim","split","setSocket","add","delete","event","removeListeners","h","https","net","tls","readyStates","protocolVersions","closeTimeout","protocols","readyState","CONNECTING","_closeMessage","_closeTimer","_closeCode","_receiver","_sender","initAsClient","CLOSING","CLOSED","OPEN","bufferedAmount","bufferSize","receiver","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setTimeout","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","emitClose","removeAllListeners","msg","_req","set","protocolVersion","createConnection","socketPath","hostname","timeout","auth","parsedUrl","href","isUnixSocket","isSecure","httpObj","search","tlsConnect","netConnect","startsWith","Origin","username","password","parts","agent","versions","modules","_socketPath","handshakeTimeout","aborted","serverProt","protList","protError","connect","servername","websocket","setHeader","abort","once","receiverOnFinish","read","clearTimeout","_writableState","finished","errorEmitted","pause","ConnectionHandler","_connection","pushRequest","getAddress","registerApp","description","permissions","CONNECTION","register","catch","connectApp","WS","global","MozWebSocket","_items","item","observers","observer","Connection","_token","_messages","_getAddress","_getBalance","_sendTransaction","_getTransactions","_sendMessage","_getMessages","_sendApplicationMessage","_getApplicationMessages","request","JSON","stringify","jsonrpc","id","onopen","handleOpen","onmessage","evt","handleResponse","onerror","onclose","handleClose","_tokenValue","subscribe","getResponse","getError","TEST","console","log","unsubscribe","Messaging","recipient","sendMessage","getMessages","applicationId","recipients","payload","sendApplicationMessage","getApplicationMessages","Wallet","getBalance","asset","quantity","sendTransaction","getTransactions"],"mappings":"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","file":"radixdlt-js-lite.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"radixdlt-js-lite\"] = factory();\n\telse\n\t\troot[\"radixdlt-js-lite\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","'use strict';\n\nfunction Queue(options) {\n  if (!(this instanceof Queue)) {\n    return new Queue(options);\n  }\n\n  options = options || {};\n  this.concurrency = options.concurrency || Infinity;\n  this.pending = 0;\n  this.jobs = [];\n  this.cbs = [];\n  this._done = done.bind(this);\n}\n\nvar arrayAddMethods = [\n  'push',\n  'unshift',\n  'splice'\n];\n\narrayAddMethods.forEach(function(method) {\n  Queue.prototype[method] = function() {\n    var methodResult = Array.prototype[method].apply(this.jobs, arguments);\n    this._run();\n    return methodResult;\n  };\n});\n\nObject.defineProperty(Queue.prototype, 'length', {\n  get: function() {\n    return this.pending + this.jobs.length;\n  }\n});\n\nQueue.prototype._run = function() {\n  if (this.pending === this.concurrency) {\n    return;\n  }\n  if (this.jobs.length) {\n    var job = this.jobs.shift();\n    this.pending++;\n    job(this._done);\n    this._run();\n  }\n\n  if (this.pending === 0) {\n    while (this.cbs.length !== 0) {\n      var cb = this.cbs.pop();\n      process.nextTick(cb);\n    }\n  }\n};\n\nQueue.prototype.onDone = function(cb) {\n  if (typeof cb === 'function') {\n    this.cbs.push(cb);\n    this._run();\n  }\n};\n\nfunction done() {\n  this.pending--;\n  this._run();\n}\n\nmodule.exports = Queue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar rxjs_1 = require(\"rxjs\");\nexports.Subject = rxjs_1.Subject;\n//# sourceMappingURL=Subject.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"rxjs-compat/Subject\"));\n//# sourceMappingURL=Subject.js.map","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport { Observable } from './internal/Observable';\nexport { ConnectableObservable } from './internal/observable/ConnectableObservable';\nexport { GroupedObservable } from './internal/operators/groupBy';\nexport { observable } from './internal/symbol/observable';\nexport { Subject } from './internal/Subject';\nexport { BehaviorSubject } from './internal/BehaviorSubject';\nexport { ReplaySubject } from './internal/ReplaySubject';\nexport { AsyncSubject } from './internal/AsyncSubject';\nexport { asap as asapScheduler } from './internal/scheduler/asap';\nexport { async as asyncScheduler } from './internal/scheduler/async';\nexport { queue as queueScheduler } from './internal/scheduler/queue';\nexport { animationFrame as animationFrameScheduler } from './internal/scheduler/animationFrame';\nexport { VirtualTimeScheduler, VirtualAction } from './internal/scheduler/VirtualTimeScheduler';\nexport { Scheduler } from './internal/Scheduler';\nexport { Subscription } from './internal/Subscription';\nexport { Subscriber } from './internal/Subscriber';\nexport { Notification } from './internal/Notification';\nexport { pipe } from './internal/util/pipe';\nexport { noop } from './internal/util/noop';\nexport { identity } from './internal/util/identity';\nexport { isObservable } from './internal/util/isObservable';\nexport { ArgumentOutOfRangeError } from './internal/util/ArgumentOutOfRangeError';\nexport { EmptyError } from './internal/util/EmptyError';\nexport { ObjectUnsubscribedError } from './internal/util/ObjectUnsubscribedError';\nexport { UnsubscriptionError } from './internal/util/UnsubscriptionError';\nexport { TimeoutError } from './internal/util/TimeoutError';\nexport { bindCallback } from './internal/observable/bindCallback';\nexport { bindNodeCallback } from './internal/observable/bindNodeCallback';\nexport { combineLatest } from './internal/observable/combineLatest';\nexport { concat } from './internal/observable/concat';\nexport { defer } from './internal/observable/defer';\nexport { empty } from './internal/observable/empty';\nexport { forkJoin } from './internal/observable/forkJoin';\nexport { from } from './internal/observable/from';\nexport { fromEvent } from './internal/observable/fromEvent';\nexport { fromEventPattern } from './internal/observable/fromEventPattern';\nexport { generate } from './internal/observable/generate';\nexport { iif } from './internal/observable/iif';\nexport { interval } from './internal/observable/interval';\nexport { merge } from './internal/observable/merge';\nexport { never } from './internal/observable/never';\nexport { of } from './internal/observable/of';\nexport { onErrorResumeNext } from './internal/observable/onErrorResumeNext';\nexport { pairs } from './internal/observable/pairs';\nexport { race } from './internal/observable/race';\nexport { range } from './internal/observable/range';\nexport { throwError } from './internal/observable/throwError';\nexport { timer } from './internal/observable/timer';\nexport { using } from './internal/observable/using';\nexport { zip } from './internal/observable/zip';\nexport { EMPTY } from './internal/observable/empty';\nexport { NEVER } from './internal/observable/never';\nexport { config } from './internal/config';\n//# sourceMappingURL=index.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { Subscription } from './Subscription';\nvar AsyncSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncSubject, _super);\n    function AsyncSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.value = null;\n        _this.hasNext = false;\n        _this.hasCompleted = false;\n        return _this;\n    }\n    AsyncSubject.prototype._subscribe = function (subscriber) {\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.hasCompleted && this.hasNext) {\n            subscriber.next(this.value);\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        return _super.prototype._subscribe.call(this, subscriber);\n    };\n    AsyncSubject.prototype.next = function (value) {\n        if (!this.hasCompleted) {\n            this.value = value;\n            this.hasNext = true;\n        }\n    };\n    AsyncSubject.prototype.error = function (error) {\n        if (!this.hasCompleted) {\n            _super.prototype.error.call(this, error);\n        }\n    };\n    AsyncSubject.prototype.complete = function () {\n        this.hasCompleted = true;\n        if (this.hasNext) {\n            _super.prototype.next.call(this, this.value);\n        }\n        _super.prototype.complete.call(this);\n    };\n    return AsyncSubject;\n}(Subject));\nexport { AsyncSubject };\n//# sourceMappingURL=AsyncSubject.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nvar BehaviorSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START _util_toSubscriber,_internal_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from '../internal/symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriberSymbol]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriberSymbol]);\n}\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_tryCatch,_util_errorObject,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { tryCatch } from './util/tryCatch';\nimport { errorObject } from './util/errorObject';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parent = null;\n        this._parents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        while (_parent) {\n            _parent.remove(this);\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function') {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            _parents.push(parent);\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Observable,_Subscriber,_Subscription,_operators_refCount PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SubjectSubscriber } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nvar ConnectableObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        _this._isComplete = false;\n        return _this;\n    }\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n            else {\n                this._connection = connection;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return higherOrderRefCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nexport { ConnectableObservable };\nvar connectableProto = ConnectableObservable.prototype;\nexport var connectableObservableDescriptor = {\n    operator: { value: null },\n    _refCount: { value: 0, writable: true },\n    _subject: { value: null, writable: true },\n    _connection: { value: null, writable: true },\n    _subscribe: { value: connectableProto._subscribe },\n    _isComplete: { value: connectableProto._isComplete, writable: true },\n    getSubject: { value: connectableProto.getSubject },\n    connect: { value: connectableProto.connect },\n    refCount: { value: connectableProto.refCount }\n};\nvar ConnectableSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=ConnectableObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_AsyncSubject,_operators_map,_util_isArray,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { map } from '../operators/map';\nimport { isArray } from '../util/isArray';\nimport { isScheduler } from '../util/isScheduler';\nexport function bindCallback(callbackFunc, resultSelector, scheduler) {\n    if (resultSelector) {\n        if (isScheduler(resultSelector)) {\n            scheduler = resultSelector;\n        }\n        else {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return bindCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n            };\n        }\n    }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var context = this;\n        var subject;\n        var params = {\n            context: context,\n            subject: subject,\n            callbackFunc: callbackFunc,\n            scheduler: scheduler,\n        };\n        return new Observable(function (subscriber) {\n            if (!scheduler) {\n                if (!subject) {\n                    subject = new AsyncSubject();\n                    var handler = function () {\n                        var innerArgs = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            innerArgs[_i] = arguments[_i];\n                        }\n                        subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n                        subject.complete();\n                    };\n                    try {\n                        callbackFunc.apply(context, args.concat([handler]));\n                    }\n                    catch (err) {\n                        subject.error(err);\n                    }\n                }\n                return subject.subscribe(subscriber);\n            }\n            else {\n                var state = {\n                    args: args, subscriber: subscriber, params: params,\n                };\n                return scheduler.schedule(dispatch, 0, state);\n            }\n        });\n    };\n}\nfunction dispatch(state) {\n    var _this = this;\n    var self = this;\n    var args = state.args, subscriber = state.subscriber, params = state.params;\n    var callbackFunc = params.callbackFunc, context = params.context, scheduler = params.scheduler;\n    var subject = params.subject;\n    if (!subject) {\n        subject = params.subject = new AsyncSubject();\n        var handler = function () {\n            var innerArgs = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                innerArgs[_i] = arguments[_i];\n            }\n            var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n            _this.add(scheduler.schedule(dispatchNext, 0, { value: value, subject: subject }));\n        };\n        try {\n            callbackFunc.apply(context, args.concat([handler]));\n        }\n        catch (err) {\n            subject.error(err);\n        }\n    }\n    this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext(state) {\n    var value = state.value, subject = state.subject;\n    subject.next(value);\n    subject.complete();\n}\nfunction dispatchError(state) {\n    var err = state.err, subject = state.subject;\n    subject.error(err);\n}\n//# sourceMappingURL=bindCallback.js.map\n","/** PURE_IMPORTS_START _Observable,_AsyncSubject,_operators_map,_util_isScheduler,_util_isArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { map } from '../operators/map';\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nexport function bindNodeCallback(callbackFunc, resultSelector, scheduler) {\n    if (resultSelector) {\n        if (isScheduler(resultSelector)) {\n            scheduler = resultSelector;\n        }\n        else {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return bindNodeCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n            };\n        }\n    }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var params = {\n            subject: undefined,\n            args: args,\n            callbackFunc: callbackFunc,\n            scheduler: scheduler,\n            context: this,\n        };\n        return new Observable(function (subscriber) {\n            var context = params.context;\n            var subject = params.subject;\n            if (!scheduler) {\n                if (!subject) {\n                    subject = params.subject = new AsyncSubject();\n                    var handler = function () {\n                        var innerArgs = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            innerArgs[_i] = arguments[_i];\n                        }\n                        var err = innerArgs.shift();\n                        if (err) {\n                            subject.error(err);\n                            return;\n                        }\n                        subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n                        subject.complete();\n                    };\n                    try {\n                        callbackFunc.apply(context, args.concat([handler]));\n                    }\n                    catch (err) {\n                        subject.error(err);\n                    }\n                }\n                return subject.subscribe(subscriber);\n            }\n            else {\n                return scheduler.schedule(dispatch, 0, { params: params, subscriber: subscriber, context: context });\n            }\n        });\n    };\n}\nfunction dispatch(state) {\n    var _this = this;\n    var params = state.params, subscriber = state.subscriber, context = state.context;\n    var callbackFunc = params.callbackFunc, args = params.args, scheduler = params.scheduler;\n    var subject = params.subject;\n    if (!subject) {\n        subject = params.subject = new AsyncSubject();\n        var handler = function () {\n            var innerArgs = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                innerArgs[_i] = arguments[_i];\n            }\n            var err = innerArgs.shift();\n            if (err) {\n                _this.add(scheduler.schedule(dispatchError, 0, { err: err, subject: subject }));\n            }\n            else {\n                var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n                _this.add(scheduler.schedule(dispatchNext, 0, { value: value, subject: subject }));\n            }\n        };\n        try {\n            callbackFunc.apply(context, args.concat([handler]));\n        }\n        catch (err) {\n            this.add(scheduler.schedule(dispatchError, 0, { err: err, subject: subject }));\n        }\n    }\n    this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext(arg) {\n    var value = arg.value, subject = arg.subject;\n    subject.next(value);\n    subject.complete();\n}\nfunction dispatchError(arg) {\n    var err = arg.err, subject = arg.subject;\n    subject.error(err);\n}\n//# sourceMappingURL=bindNodeCallback.js.map\n","/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\nvar NONE = {};\nexport function combineLatest() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = null;\n    var scheduler = null;\n    if (isScheduler(observables[observables.length - 1])) {\n        scheduler = observables.pop();\n    }\n    if (typeof observables[observables.length - 1] === 'function') {\n        resultSelector = observables.pop();\n    }\n    if (observables.length === 1 && isArray(observables[0])) {\n        observables = observables[0];\n    }\n    return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /*@__PURE__*/ (function () {\n    function CombineLatestOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    CombineLatestOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n    };\n    return CombineLatestOperator;\n}());\nexport { CombineLatestOperator };\nvar CombineLatestSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\nexport { CombineLatestSubscriber };\n//# sourceMappingURL=combineLatest.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_of,_from,_operators_concatAll PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { of } from './of';\nimport { from } from './from';\nimport { concatAll } from '../operators/concatAll';\nexport function concat() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    if (observables.length === 1 || (observables.length === 2 && isScheduler(observables[1]))) {\n        return from(observables[0]);\n    }\n    return concatAll()(of.apply(void 0, observables));\n}\n//# sourceMappingURL=concat.js.map\n","/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { from } from './from';\nimport { empty } from './empty';\nexport function defer(observableFactory) {\n    return new Observable(function (subscriber) {\n        var input;\n        try {\n            input = observableFactory();\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        var source = input ? from(input) : empty();\n        return source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=defer.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nexport function emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_util_isArray,_empty,_util_subscribeToResult,_OuterSubscriber,_operators_map PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { EMPTY } from './empty';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { map } from '../operators/map';\nexport function forkJoin() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    var resultSelector;\n    if (typeof sources[sources.length - 1] === 'function') {\n        resultSelector = sources.pop();\n    }\n    if (sources.length === 1 && isArray(sources[0])) {\n        sources = sources[0];\n    }\n    if (sources.length === 0) {\n        return EMPTY;\n    }\n    if (resultSelector) {\n        return forkJoin(sources).pipe(map(function (args) { return resultSelector.apply(void 0, args); }));\n    }\n    return new Observable(function (subscriber) {\n        return new ForkJoinSubscriber(subscriber, sources);\n    });\n}\nvar ForkJoinSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ForkJoinSubscriber, _super);\n    function ForkJoinSubscriber(destination, sources) {\n        var _this = _super.call(this, destination) || this;\n        _this.sources = sources;\n        _this.completed = 0;\n        _this.haveValues = 0;\n        var len = sources.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            var source = sources[i];\n            var innerSubscription = subscribeToResult(_this, source, null, i);\n            if (innerSubscription) {\n                _this.add(innerSubscription);\n            }\n        }\n        return _this;\n    }\n    ForkJoinSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        if (!innerSub._hasValue) {\n            innerSub._hasValue = true;\n            this.haveValues++;\n        }\n    };\n    ForkJoinSubscriber.prototype.notifyComplete = function (innerSub) {\n        var _a = this, destination = _a.destination, haveValues = _a.haveValues, values = _a.values;\n        var len = values.length;\n        if (!innerSub._hasValue) {\n            destination.complete();\n            return;\n        }\n        this.completed++;\n        if (this.completed !== len) {\n            return;\n        }\n        if (haveValues === len) {\n            destination.next(values);\n        }\n        destination.complete();\n    };\n    return ForkJoinSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=forkJoin.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isPromise,_util_isArrayLike,_util_isInteropObservable,_util_isIterable,_fromArray,_fromPromise,_fromIterable,_fromObservable,_util_subscribeTo PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isIterable } from '../util/isIterable';\nimport { fromArray } from './fromArray';\nimport { fromPromise } from './fromPromise';\nimport { fromIterable } from './fromIterable';\nimport { fromObservable } from './fromObservable';\nimport { subscribeTo } from '../util/subscribeTo';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return fromPromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return fromArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return fromIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_util_subscribeToArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { subscribeToArray } from '../util/subscribeToArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var i = 0;\n            sub.add(scheduler.schedule(function () {\n                if (i === input.length) {\n                    subscriber.complete();\n                    return;\n                }\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    sub.add(this.schedule());\n                }\n            }));\n            return sub;\n        });\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = Object.prototype.toString;\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        function handler(e) {\n            if (arguments.length > 1) {\n                subscriber.next(Array.prototype.slice.call(arguments));\n            }\n            else {\n                subscriber.next(e);\n            }\n        }\n        setupSubscription(target, eventName, handler, subscriber, options);\n    });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n    var unsubscribe;\n    if (isEventTarget(sourceObj)) {\n        var source_1 = sourceObj;\n        sourceObj.addEventListener(eventName, handler, options);\n        unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n    }\n    else if (isJQueryStyleEventEmitter(sourceObj)) {\n        var source_2 = sourceObj;\n        sourceObj.on(eventName, handler);\n        unsubscribe = function () { return source_2.off(eventName, handler); };\n    }\n    else if (isNodeStyleEventEmitter(sourceObj)) {\n        var source_3 = sourceObj;\n        sourceObj.addListener(eventName, handler);\n        unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n    }\n    else if (sourceObj && sourceObj.length) {\n        for (var i = 0, len = sourceObj.length; i < len; i++) {\n            setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n        }\n    }\n    else {\n        throw new TypeError('Invalid event target');\n    }\n    subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n    return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n//# sourceMappingURL=fromEvent.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nexport function fromEventPattern(addHandler, removeHandler, resultSelector) {\n    if (resultSelector) {\n        return fromEventPattern(addHandler, removeHandler).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        var handler = function () {\n            var e = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                e[_i] = arguments[_i];\n            }\n            return subscriber.next(e.length === 1 ? e[0] : e);\n        };\n        var retValue;\n        try {\n            retValue = addHandler(handler);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        if (!isFunction(removeHandler)) {\n            return undefined;\n        }\n        return function () { return removeHandler(handler, retValue); };\n    });\n}\n//# sourceMappingURL=fromEventPattern.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator,_util_subscribeToIterable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { subscribeToIterable } from '../util/subscribeToIterable';\nexport function fromIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    if (!scheduler) {\n        return new Observable(subscribeToIterable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var iterator;\n            sub.add(function () {\n                if (iterator && typeof iterator.return === 'function') {\n                    iterator.return();\n                }\n            });\n            sub.add(scheduler.schedule(function () {\n                iterator = input[Symbol_iterator]();\n                sub.add(scheduler.schedule(function () {\n                    if (subscriber.closed) {\n                        return;\n                    }\n                    var value;\n                    var done;\n                    try {\n                        var result = iterator.next();\n                        value = result.value;\n                        done = result.done;\n                    }\n                    catch (err) {\n                        subscriber.error(err);\n                        return;\n                    }\n                    if (done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(value);\n                        this.schedule();\n                    }\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n//# sourceMappingURL=fromIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable,_util_subscribeToObservable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nimport { subscribeToObservable } from '../util/subscribeToObservable';\nexport function fromObservable(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToObservable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () {\n                var observable = input[Symbol_observable]();\n                sub.add(observable.subscribe({\n                    next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                    error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                    complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n//# sourceMappingURL=fromObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_util_subscribeToPromise PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { subscribeToPromise } from '../util/subscribeToPromise';\nexport function fromPromise(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToPromise(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () {\n                return input.then(function (value) {\n                    sub.add(scheduler.schedule(function () {\n                        subscriber.next(value);\n                        sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                    }));\n                }, function (err) {\n                    sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n                });\n            }));\n            return sub;\n        });\n    }\n}\n//# sourceMappingURL=fromPromise.js.map\n","/** PURE_IMPORTS_START _Observable,_util_identity,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { identity } from '../util/identity';\nimport { isScheduler } from '../util/isScheduler';\nexport function generate(initialStateOrOptions, condition, iterate, resultSelectorOrObservable, scheduler) {\n    var resultSelector;\n    var initialState;\n    if (arguments.length == 1) {\n        var options = initialStateOrOptions;\n        initialState = options.initialState;\n        condition = options.condition;\n        iterate = options.iterate;\n        resultSelector = options.resultSelector || identity;\n        scheduler = options.scheduler;\n    }\n    else if (resultSelectorOrObservable === undefined || isScheduler(resultSelectorOrObservable)) {\n        initialState = initialStateOrOptions;\n        resultSelector = identity;\n        scheduler = resultSelectorOrObservable;\n    }\n    else {\n        initialState = initialStateOrOptions;\n        resultSelector = resultSelectorOrObservable;\n    }\n    return new Observable(function (subscriber) {\n        var state = initialState;\n        if (scheduler) {\n            return scheduler.schedule(dispatch, 0, {\n                subscriber: subscriber,\n                iterate: iterate,\n                condition: condition,\n                resultSelector: resultSelector,\n                state: state\n            });\n        }\n        do {\n            if (condition) {\n                var conditionResult = void 0;\n                try {\n                    conditionResult = condition(state);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return undefined;\n                }\n                if (!conditionResult) {\n                    subscriber.complete();\n                    break;\n                }\n            }\n            var value = void 0;\n            try {\n                value = resultSelector(state);\n            }\n            catch (err) {\n                subscriber.error(err);\n                return undefined;\n            }\n            subscriber.next(value);\n            if (subscriber.closed) {\n                break;\n            }\n            try {\n                state = iterate(state);\n            }\n            catch (err) {\n                subscriber.error(err);\n                return undefined;\n            }\n        } while (true);\n        return undefined;\n    });\n}\nfunction dispatch(state) {\n    var subscriber = state.subscriber, condition = state.condition;\n    if (subscriber.closed) {\n        return undefined;\n    }\n    if (state.needIterate) {\n        try {\n            state.state = state.iterate(state.state);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n    }\n    else {\n        state.needIterate = true;\n    }\n    if (condition) {\n        var conditionResult = void 0;\n        try {\n            conditionResult = condition(state.state);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        if (!conditionResult) {\n            subscriber.complete();\n            return undefined;\n        }\n        if (subscriber.closed) {\n            return undefined;\n        }\n    }\n    var value;\n    try {\n        value = state.resultSelector(state.state);\n    }\n    catch (err) {\n        subscriber.error(err);\n        return undefined;\n    }\n    if (subscriber.closed) {\n        return undefined;\n    }\n    subscriber.next(value);\n    if (subscriber.closed) {\n        return undefined;\n    }\n    return this.schedule(state);\n}\n//# sourceMappingURL=generate.js.map\n","/** PURE_IMPORTS_START _defer,_empty PURE_IMPORTS_END */\nimport { defer } from './defer';\nimport { EMPTY } from './empty';\nexport function iif(condition, trueResult, falseResult) {\n    if (trueResult === void 0) {\n        trueResult = EMPTY;\n    }\n    if (falseResult === void 0) {\n        falseResult = EMPTY;\n    }\n    return defer(function () { return condition() ? trueResult : falseResult; });\n}\n//# sourceMappingURL=iif.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nexport function interval(period, scheduler) {\n    if (period === void 0) {\n        period = 0;\n    }\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    if (!isNumeric(period) || period < 0) {\n        period = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        subscriber.add(scheduler.schedule(dispatch, period, { subscriber: subscriber, counter: 0, period: period }));\n        return subscriber;\n    });\n}\nfunction dispatch(state) {\n    var subscriber = state.subscriber, counter = state.counter, period = state.period;\n    subscriber.next(counter);\n    this.schedule({ subscriber: subscriber, counter: counter + 1, period: period }, period);\n}\n//# sourceMappingURL=interval.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\nexport function merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n","/** PURE_IMPORTS_START _Observable,_util_noop PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport var NEVER = /*@__PURE__*/ new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n//# sourceMappingURL=never.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_empty,_scalar PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { empty } from './empty';\nimport { scalar } from './scalar';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n    }\n    else {\n        scheduler = undefined;\n    }\n    switch (args.length) {\n        case 0:\n            return empty(scheduler);\n        case 1:\n            return scheduler ? fromArray(args, scheduler) : scalar(args[0]);\n        default:\n            return fromArray(args, scheduler);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START _Observable,_from,_util_isArray,_empty PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { from } from './from';\nimport { isArray } from '../util/isArray';\nimport { EMPTY } from './empty';\nexport function onErrorResumeNext() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    if (sources.length === 0) {\n        return EMPTY;\n    }\n    var first = sources[0], remainder = sources.slice(1);\n    if (sources.length === 1 && isArray(first)) {\n        return onErrorResumeNext.apply(void 0, first);\n    }\n    return new Observable(function (subscriber) {\n        var subNext = function () { return subscriber.add(onErrorResumeNext.apply(void 0, remainder).subscribe(subscriber)); };\n        return from(first).subscribe({\n            next: function (value) { subscriber.next(value); },\n            error: subNext,\n            complete: subNext,\n        });\n    });\n}\n//# sourceMappingURL=onErrorResumeNext.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function pairs(obj, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length && !subscriber.closed; i++) {\n                var key = keys[i];\n                if (obj.hasOwnProperty(key)) {\n                    subscriber.next([key, obj[key]]);\n                }\n            }\n            subscriber.complete();\n        });\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var keys = Object.keys(obj);\n            var subscription = new Subscription();\n            subscription.add(scheduler.schedule(dispatch, 0, { keys: keys, index: 0, subscriber: subscriber, subscription: subscription, obj: obj }));\n            return subscription;\n        });\n    }\n}\nexport function dispatch(state) {\n    var keys = state.keys, index = state.index, subscriber = state.subscriber, subscription = state.subscription, obj = state.obj;\n    if (!subscriber.closed) {\n        if (index < keys.length) {\n            var key = keys[index];\n            subscriber.next([key, obj[key]]);\n            subscription.add(this.schedule({ keys: keys, index: index + 1, subscriber: subscriber, subscription: subscription, obj: obj }));\n        }\n        else {\n            subscriber.complete();\n        }\n    }\n}\n//# sourceMappingURL=pairs.js.map\n","/** PURE_IMPORTS_START tslib,_util_isArray,_fromArray,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isArray } from '../util/isArray';\nimport { fromArray } from './fromArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function race() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    if (observables.length === 1) {\n        if (isArray(observables[0])) {\n            observables = observables[0];\n        }\n        else {\n            return observables[0];\n        }\n    }\n    return fromArray(observables, undefined).lift(new RaceOperator());\n}\nvar RaceOperator = /*@__PURE__*/ (function () {\n    function RaceOperator() {\n    }\n    RaceOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new RaceSubscriber(subscriber));\n    };\n    return RaceOperator;\n}());\nexport { RaceOperator };\nvar RaceSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RaceSubscriber, _super);\n    function RaceSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasFirst = false;\n        _this.observables = [];\n        _this.subscriptions = [];\n        return _this;\n    }\n    RaceSubscriber.prototype._next = function (observable) {\n        this.observables.push(observable);\n    };\n    RaceSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            for (var i = 0; i < len && !this.hasFirst; i++) {\n                var observable = observables[i];\n                var subscription = subscribeToResult(this, observable, observable, i);\n                if (this.subscriptions) {\n                    this.subscriptions.push(subscription);\n                }\n                this.add(subscription);\n            }\n            this.observables = null;\n        }\n    };\n    RaceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (!this.hasFirst) {\n            this.hasFirst = true;\n            for (var i = 0; i < this.subscriptions.length; i++) {\n                if (i !== outerIndex) {\n                    var subscription = this.subscriptions[i];\n                    subscription.unsubscribe();\n                    this.remove(subscription);\n                }\n            }\n            this.subscriptions = null;\n        }\n        this.destination.next(innerValue);\n    };\n    return RaceSubscriber;\n}(OuterSubscriber));\nexport { RaceSubscriber };\n//# sourceMappingURL=race.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function range(start, count, scheduler) {\n    if (start === void 0) {\n        start = 0;\n    }\n    if (count === void 0) {\n        count = 0;\n    }\n    return new Observable(function (subscriber) {\n        var index = 0;\n        var current = start;\n        if (scheduler) {\n            return scheduler.schedule(dispatch, 0, {\n                index: index, count: count, start: start, subscriber: subscriber\n            });\n        }\n        else {\n            do {\n                if (index++ >= count) {\n                    subscriber.complete();\n                    break;\n                }\n                subscriber.next(current++);\n                if (subscriber.closed) {\n                    break;\n                }\n            } while (true);\n        }\n        return undefined;\n    });\n}\nexport function dispatch(state) {\n    var start = state.start, index = state.index, count = state.count, subscriber = state.subscriber;\n    if (index >= count) {\n        subscriber.complete();\n        return;\n    }\n    subscriber.next(start);\n    if (subscriber.closed) {\n        return;\n    }\n    state.index = index + 1;\n    state.start = start + 1;\n    this.schedule(state);\n}\n//# sourceMappingURL=range.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function scalar(value) {\n    var result = new Observable(function (subscriber) {\n        subscriber.next(value);\n        subscriber.complete();\n    });\n    result._isScalar = true;\n    result.value = value;\n    return result;\n}\n//# sourceMappingURL=scalar.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime, periodOrScheduler, scheduler) {\n    if (dueTime === void 0) {\n        dueTime = 0;\n    }\n    var period = -1;\n    if (isNumeric(periodOrScheduler)) {\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n    }\n    else if (isScheduler(periodOrScheduler)) {\n        scheduler = periodOrScheduler;\n    }\n    if (!isScheduler(scheduler)) {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        var due = isNumeric(dueTime)\n            ? dueTime\n            : (+dueTime - scheduler.now());\n        return scheduler.schedule(dispatch, due, {\n            index: 0, period: period, subscriber: subscriber\n        });\n    });\n}\nfunction dispatch(state) {\n    var index = state.index, period = state.period, subscriber = state.subscriber;\n    subscriber.next(index);\n    if (subscriber.closed) {\n        return;\n    }\n    else if (period === -1) {\n        return subscriber.complete();\n    }\n    state.index = index + 1;\n    this.schedule(state, period);\n}\n//# sourceMappingURL=timer.js.map\n","/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { from } from './from';\nimport { EMPTY } from './empty';\nexport function using(resourceFactory, observableFactory) {\n    return new Observable(function (subscriber) {\n        var resource;\n        try {\n            resource = resourceFactory();\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        var result;\n        try {\n            result = observableFactory(resource);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        var source = result ? from(result) : EMPTY;\n        var subscription = source.subscribe(subscriber);\n        return function () {\n            subscription.unsubscribe();\n            if (resource) {\n                resource.unsubscribe();\n            }\n        };\n    });\n}\n//# sourceMappingURL=using.js.map\n","/** PURE_IMPORTS_START tslib,_fromArray,_util_isArray,_Subscriber,_OuterSubscriber,_util_subscribeToResult,_.._internal_symbol_iterator PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { fromArray } from './fromArray';\nimport { isArray } from '../util/isArray';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\nexport function zip() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = observables[observables.length - 1];\n    if (typeof resultSelector === 'function') {\n        observables.pop();\n    }\n    return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\n}\nvar ZipOperator = /*@__PURE__*/ (function () {\n    function ZipOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    ZipOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\n    };\n    return ZipOperator;\n}());\nexport { ZipOperator };\nvar ZipSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ZipSubscriber, _super);\n    function ZipSubscriber(destination, resultSelector, values) {\n        if (values === void 0) {\n            values = Object.create(null);\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.iterators = [];\n        _this.active = 0;\n        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\n        _this.values = values;\n        return _this;\n    }\n    ZipSubscriber.prototype._next = function (value) {\n        var iterators = this.iterators;\n        if (isArray(value)) {\n            iterators.push(new StaticArrayIterator(value));\n        }\n        else if (typeof value[Symbol_iterator] === 'function') {\n            iterators.push(new StaticIterator(value[Symbol_iterator]()));\n        }\n        else {\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\n        }\n    };\n    ZipSubscriber.prototype._complete = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        if (len === 0) {\n            this.destination.complete();\n            return;\n        }\n        this.active = len;\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            if (iterator.stillUnsubscribed) {\n                this.add(iterator.subscribe(iterator, i));\n            }\n            else {\n                this.active--;\n            }\n        }\n    };\n    ZipSubscriber.prototype.notifyInactive = function () {\n        this.active--;\n        if (this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ZipSubscriber.prototype.checkIterators = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        var destination = this.destination;\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\n                return;\n            }\n        }\n        var shouldComplete = false;\n        var args = [];\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            var result = iterator.next();\n            if (iterator.hasCompleted()) {\n                shouldComplete = true;\n            }\n            if (result.done) {\n                destination.complete();\n                return;\n            }\n            args.push(result.value);\n        }\n        if (this.resultSelector) {\n            this._tryresultSelector(args);\n        }\n        else {\n            destination.next(args);\n        }\n        if (shouldComplete) {\n            destination.complete();\n        }\n    };\n    ZipSubscriber.prototype._tryresultSelector = function (args) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return ZipSubscriber;\n}(Subscriber));\nexport { ZipSubscriber };\nvar StaticIterator = /*@__PURE__*/ (function () {\n    function StaticIterator(iterator) {\n        this.iterator = iterator;\n        this.nextResult = iterator.next();\n    }\n    StaticIterator.prototype.hasValue = function () {\n        return true;\n    };\n    StaticIterator.prototype.next = function () {\n        var result = this.nextResult;\n        this.nextResult = this.iterator.next();\n        return result;\n    };\n    StaticIterator.prototype.hasCompleted = function () {\n        var nextResult = this.nextResult;\n        return nextResult && nextResult.done;\n    };\n    return StaticIterator;\n}());\nvar StaticArrayIterator = /*@__PURE__*/ (function () {\n    function StaticArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n        this.length = 0;\n        this.length = array.length;\n    }\n    StaticArrayIterator.prototype[Symbol_iterator] = function () {\n        return this;\n    };\n    StaticArrayIterator.prototype.next = function (value) {\n        var i = this.index++;\n        var array = this.array;\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n    };\n    StaticArrayIterator.prototype.hasValue = function () {\n        return this.array.length > this.index;\n    };\n    StaticArrayIterator.prototype.hasCompleted = function () {\n        return this.array.length === this.index;\n    };\n    return StaticArrayIterator;\n}());\nvar ZipBufferIterator = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ZipBufferIterator, _super);\n    function ZipBufferIterator(destination, parent, observable) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        _this.observable = observable;\n        _this.stillUnsubscribed = true;\n        _this.buffer = [];\n        _this.isComplete = false;\n        return _this;\n    }\n    ZipBufferIterator.prototype[Symbol_iterator] = function () {\n        return this;\n    };\n    ZipBufferIterator.prototype.next = function () {\n        var buffer = this.buffer;\n        if (buffer.length === 0 && this.isComplete) {\n            return { value: null, done: true };\n        }\n        else {\n            return { value: buffer.shift(), done: false };\n        }\n    };\n    ZipBufferIterator.prototype.hasValue = function () {\n        return this.buffer.length > 0;\n    };\n    ZipBufferIterator.prototype.hasCompleted = function () {\n        return this.buffer.length === 0 && this.isComplete;\n    };\n    ZipBufferIterator.prototype.notifyComplete = function () {\n        if (this.buffer.length > 0) {\n            this.isComplete = true;\n            this.parent.notifyInactive();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ZipBufferIterator.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.buffer.push(innerValue);\n        this.parent.checkIterators();\n    };\n    ZipBufferIterator.prototype.subscribe = function (value, index) {\n        return subscribeToResult(this, this.observable, this, index);\n    };\n    return ZipBufferIterator;\n}(OuterSubscriber));\n//# sourceMappingURL=zip.js.map\n","/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */\nimport { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription,_Observable,_Subject PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nexport function groupBy(keySelector, elementSelector, durationSelector, subjectSelector) {\n    return function (source) {\n        return source.lift(new GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector));\n    };\n}\nvar GroupByOperator = /*@__PURE__*/ (function () {\n    function GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector) {\n        this.keySelector = keySelector;\n        this.elementSelector = elementSelector;\n        this.durationSelector = durationSelector;\n        this.subjectSelector = subjectSelector;\n    }\n    GroupByOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new GroupBySubscriber(subscriber, this.keySelector, this.elementSelector, this.durationSelector, this.subjectSelector));\n    };\n    return GroupByOperator;\n}());\nvar GroupBySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(GroupBySubscriber, _super);\n    function GroupBySubscriber(destination, keySelector, elementSelector, durationSelector, subjectSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.elementSelector = elementSelector;\n        _this.durationSelector = durationSelector;\n        _this.subjectSelector = subjectSelector;\n        _this.groups = null;\n        _this.attemptedToUnsubscribe = false;\n        _this.count = 0;\n        return _this;\n    }\n    GroupBySubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            this.error(err);\n            return;\n        }\n        this._group(value, key);\n    };\n    GroupBySubscriber.prototype._group = function (value, key) {\n        var groups = this.groups;\n        if (!groups) {\n            groups = this.groups = new Map();\n        }\n        var group = groups.get(key);\n        var element;\n        if (this.elementSelector) {\n            try {\n                element = this.elementSelector(value);\n            }\n            catch (err) {\n                this.error(err);\n            }\n        }\n        else {\n            element = value;\n        }\n        if (!group) {\n            group = (this.subjectSelector ? this.subjectSelector() : new Subject());\n            groups.set(key, group);\n            var groupedObservable = new GroupedObservable(key, group, this);\n            this.destination.next(groupedObservable);\n            if (this.durationSelector) {\n                var duration = void 0;\n                try {\n                    duration = this.durationSelector(new GroupedObservable(key, group));\n                }\n                catch (err) {\n                    this.error(err);\n                    return;\n                }\n                this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));\n            }\n        }\n        if (!group.closed) {\n            group.next(element);\n        }\n    };\n    GroupBySubscriber.prototype._error = function (err) {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.error(err);\n            });\n            groups.clear();\n        }\n        this.destination.error(err);\n    };\n    GroupBySubscriber.prototype._complete = function () {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.complete();\n            });\n            groups.clear();\n        }\n        this.destination.complete();\n    };\n    GroupBySubscriber.prototype.removeGroup = function (key) {\n        this.groups.delete(key);\n    };\n    GroupBySubscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.attemptedToUnsubscribe = true;\n            if (this.count === 0) {\n                _super.prototype.unsubscribe.call(this);\n            }\n        }\n    };\n    return GroupBySubscriber;\n}(Subscriber));\nvar GroupDurationSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(GroupDurationSubscriber, _super);\n    function GroupDurationSubscriber(key, group, parent) {\n        var _this = _super.call(this, group) || this;\n        _this.key = key;\n        _this.group = group;\n        _this.parent = parent;\n        return _this;\n    }\n    GroupDurationSubscriber.prototype._next = function (value) {\n        this.complete();\n    };\n    GroupDurationSubscriber.prototype._unsubscribe = function () {\n        var _a = this, parent = _a.parent, key = _a.key;\n        this.key = this.parent = null;\n        if (parent) {\n            parent.removeGroup(key);\n        }\n    };\n    return GroupDurationSubscriber;\n}(Subscriber));\nvar GroupedObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(GroupedObservable, _super);\n    function GroupedObservable(key, groupSubject, refCountSubscription) {\n        var _this = _super.call(this) || this;\n        _this.key = key;\n        _this.groupSubject = groupSubject;\n        _this.refCountSubscription = refCountSubscription;\n        return _this;\n    }\n    GroupedObservable.prototype._subscribe = function (subscriber) {\n        var subscription = new Subscription();\n        var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;\n        if (refCountSubscription && !refCountSubscription.closed) {\n            subscription.add(new InnerRefCountSubscription(refCountSubscription));\n        }\n        subscription.add(groupSubject.subscribe(subscriber));\n        return subscription;\n    };\n    return GroupedObservable;\n}(Observable));\nexport { GroupedObservable };\nvar InnerRefCountSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerRefCountSubscription, _super);\n    function InnerRefCountSubscription(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        parent.count++;\n        return _this;\n    }\n    InnerRefCountSubscription.prototype.unsubscribe = function () {\n        var parent = this.parent;\n        if (!parent.closed && !this.closed) {\n            _super.prototype.unsubscribe.call(this);\n            parent.count -= 1;\n            if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n                parent.unsubscribe();\n            }\n        }\n    };\n    return InnerRefCountSubscription;\n}(Subscription));\n//# sourceMappingURL=groupBy.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\nexport { MergeMapSubscriber };\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator(source));\n    };\n}\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=refCount.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar AnimationFrameAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function () { return scheduler.flush(null); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\nexport { AnimationFrameAction };\n//# sourceMappingURL=AnimationFrameAction.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AnimationFrameScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\nexport { AnimationFrameScheduler };\n//# sourceMappingURL=AnimationFrameScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_util_Immediate,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Immediate } from '../util/Immediate';\nimport { AsyncAction } from './AsyncAction';\nvar AsapAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        if (scheduler.actions.length === 0) {\n            Immediate.clearImmediate(id);\n            scheduler.scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\nexport { AsapAction };\n//# sourceMappingURL=AsapAction.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AsapScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsapScheduler, _super);\n    function AsapScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AsapScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsapScheduler;\n}(AsyncScheduler));\nexport { AsapScheduler };\n//# sourceMappingURL=AsapScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        return clearInterval(id) && undefined || undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nvar VirtualTimeScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(VirtualTimeScheduler, _super);\n    function VirtualTimeScheduler(SchedulerAction, maxFrames) {\n        if (SchedulerAction === void 0) {\n            SchedulerAction = VirtualAction;\n        }\n        if (maxFrames === void 0) {\n            maxFrames = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, SchedulerAction, function () { return _this.frame; }) || this;\n        _this.maxFrames = maxFrames;\n        _this.frame = 0;\n        _this.index = -1;\n        return _this;\n    }\n    VirtualTimeScheduler.prototype.flush = function () {\n        var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n        var error, action;\n        while ((action = actions.shift()) && (this.frame = action.delay) <= maxFrames) {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        }\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    VirtualTimeScheduler.frameTimeFactor = 10;\n    return VirtualTimeScheduler;\n}(AsyncScheduler));\nexport { VirtualTimeScheduler };\nvar VirtualAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(VirtualAction, _super);\n    function VirtualAction(scheduler, work, index) {\n        if (index === void 0) {\n            index = scheduler.index += 1;\n        }\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.index = index;\n        _this.active = true;\n        _this.index = scheduler.index = index;\n        return _this;\n    }\n    VirtualAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (!this.id) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.active = false;\n        var action = new VirtualAction(this.scheduler, this.work);\n        this.add(action);\n        return action.schedule(state, delay);\n    };\n    VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.delay = scheduler.frame + delay;\n        var actions = scheduler.actions;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    };\n    VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return undefined;\n    };\n    VirtualAction.prototype._execute = function (state, delay) {\n        if (this.active === true) {\n            return _super.prototype._execute.call(this, state, delay);\n        }\n    };\n    VirtualAction.sortActions = function (a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    };\n    return VirtualAction;\n}(AsyncAction));\nexport { VirtualAction };\n//# sourceMappingURL=VirtualTimeScheduler.js.map\n","/** PURE_IMPORTS_START _AnimationFrameAction,_AnimationFrameScheduler PURE_IMPORTS_END */\nimport { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nexport var animationFrame = /*@__PURE__*/ new AnimationFrameScheduler(AnimationFrameAction);\n//# sourceMappingURL=animationFrame.js.map\n","/** PURE_IMPORTS_START _AsapAction,_AsapScheduler PURE_IMPORTS_END */\nimport { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\nexport var asap = /*@__PURE__*/ new AsapScheduler(AsapAction);\n//# sourceMappingURL=asap.js.map\n","/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var async = /*@__PURE__*/ new AsyncScheduler(AsyncAction);\n//# sourceMappingURL=async.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? /*@__PURE__*/ Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nvar ArgumentOutOfRangeError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\nexport { ArgumentOutOfRangeError };\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nvar EmptyError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\nexport { EmptyError };\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar nextHandle = 1;\nvar tasksByHandle = {};\nfunction runIfPresent(handle) {\n    var cb = tasksByHandle[handle];\n    if (cb) {\n        cb();\n    }\n}\nexport var Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        tasksByHandle[handle] = cb;\n        Promise.resolve().then(function () { return runIfPresent(handle); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        delete tasksByHandle[handle];\n    },\n};\n//# sourceMappingURL=Immediate.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nvar ObjectUnsubscribedError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\nexport { ObjectUnsubscribedError };\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nvar TimeoutError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        _this.name = 'TimeoutError';\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\nexport { TimeoutError };\n//# sourceMappingURL=TimeoutError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nvar UnsubscriptionError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\nexport { UnsubscriptionError };\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */\nimport { isArray } from './isArray';\nexport function isNumeric(val) {\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n//# sourceMappingURL=isNumeric.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x != null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function isObservable(obj) {\n    return !!obj && (obj instanceof Observable || (typeof obj.lift === 'function' && typeof obj.subscribe === 'function'));\n}\n//# sourceMappingURL=isObservable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _Observable,_subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (result instanceof Observable) {\n        return function (subscriber) {\n            if (result._isScalar) {\n                subscriber.next(result.value);\n                subscriber.complete();\n                return undefined;\n            }\n            else {\n                return result.subscribe(subscriber);\n            }\n        };\n    }\n    else if (result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        if (!subscriber.closed) {\n            subscriber.complete();\n        }\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n    var destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    return subscribeTo(result)(destination);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _errorObject PURE_IMPORTS_END */\nimport { errorObject } from './errorObject';\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nexport function tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n//# sourceMappingURL=tryCatch.js.map\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat (list, totalLength) {\n  const target = Buffer.allocUnsafe(totalLength);\n  var offset = 0;\n\n  for (var i = 0; i < list.length; i++) {\n    const buf = list[i];\n    buf.copy(target, offset);\n    offset += buf.length;\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask (source, mask, output, offset, length) {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask (buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    mask (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    unmask (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    },\n    concat\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = { concat, mask: _mask, unmask: _unmask };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was dispatched\n   */\n  constructor (type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being closed\n   * @param {String} reason A human-readable string explaining why the connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} method A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @public\n   */\n  addEventListener (method, listener) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage (data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose (code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError (error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen () {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    if (method === 'message') {\n      onMessage._listener = listener;\n      this.on(method, onMessage);\n    } else if (method === 'close') {\n      onClose._listener = listener;\n      this.on(method, onClose);\n    } else if (method === 'error') {\n      onError._listener = listener;\n      this.on(method, onError);\n    } else if (method === 'open') {\n      onOpen._listener = listener;\n      this.on(method, onOpen);\n    } else {\n      this.on(method, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} method A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener (method, listener) {\n    const listeners = this.listeners(method);\n\n    for (var i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(method, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push (dest, name, elem) {\n  if (Object.prototype.hasOwnProperty.call(dest, name)) dest[name].push(elem);\n  else dest[name] = [elem];\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse (header) {\n  const offers = {};\n\n  if (header === undefined || header === '') return offers;\n\n  var params = {};\n  var mustUnescape = false;\n  var isEscaping = false;\n  var inQuotes = false;\n  var extensionName;\n  var paramName;\n  var start = -1;\n  var end = -1;\n\n  for (var i = 0; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20/* ' ' */|| code === 0x09/* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b/* ';' */ || code === 0x2c/* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = {};\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d/* '=' */&& start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22/* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c/* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        var value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, {});\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format (extensions) {\n  return Object.keys(extensions).map((extension) => {\n    var configurations = extensions[extension];\n    if (!Array.isArray(configurations)) configurations = [configurations];\n    return configurations.map((params) => {\n      return [extension].concat(Object.keys(params).map((k) => {\n        var values = params[k];\n        if (!Array.isArray(values)) values = [values];\n        return values.map((v) => v === true ? k : `${k}=${v}`).join('; ');\n      })).join('; ');\n    }).join(', ');\n  }).join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst Limiter = require('async-limiter');\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst constants = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst EMPTY_BLOCK = Buffer.from([0x00]);\n\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kWriteInProgress = Symbol('write-in-progress');\nconst kPendingClose = Symbol('pending-close');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} options.serverNoContextTakeover Request/accept disabling\n   *     of server context takeover\n   * @param {Boolean} options.clientNoContextTakeover Advertise/acknowledge\n   *     disabling of client context takeover\n   * @param {(Boolean|Number)} options.serverMaxWindowBits Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} options.clientMaxWindowBits Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} options.zlibDeflateOptions Options to pass to zlib on deflate\n   * @param {Object} options.zlibInflateOptions Options to pass to zlib on inflate\n   * @param {Number} options.threshold Size (in bytes) below which messages\n   *     should not be compressed\n   * @param {Number} options.concurrencyLimit The number of concurrent calls to\n   *     zlib\n   * @param {Boolean} isServer Create the instance in either server or client\n   *     mode\n   * @param {Number} maxPayload The maximum allowed message length\n   */\n  constructor (options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold = this._options.threshold !== undefined\n      ? this._options.threshold\n      : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency = this._options.concurrencyLimit !== undefined\n        ? this._options.concurrencyLimit\n        : 10;\n      zlibLimiter = new Limiter({ concurrency });\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName () {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer () {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept (configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup () {\n    if (this._inflate) {\n      if (this._inflate[kWriteInProgress]) {\n        this._inflate[kPendingClose] = true;\n      } else {\n        this._inflate.close();\n        this._inflate = null;\n      }\n    }\n    if (this._deflate) {\n      if (this._deflate[kWriteInProgress]) {\n        this._deflate[kPendingClose] = true;\n      } else {\n        this._deflate.close();\n        this._deflate = null;\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer (offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient (response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams (configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        var value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited by async-limiter.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress (data, fin, callback) {\n    zlibLimiter.push((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited by async-limiter.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress (data, fin, callback) {\n    zlibLimiter.push((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress (data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits = typeof this.params[key] !== 'number'\n        ? zlib.Z_DEFAULT_WINDOWBITS\n        : this.params[key];\n\n      this._inflate = zlib.createInflateRaw(\n        Object.assign({}, this._options.zlibInflateOptions, { windowBits })\n      );\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n    this._inflate[kWriteInProgress] = true;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (\n        (fin && this.params[`${endpoint}_no_context_takeover`]) ||\n        this._inflate[kPendingClose]\n      ) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kWriteInProgress] = false;\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress (data, fin, callback) {\n    if (!data || data.length === 0) {\n      process.nextTick(callback, null, EMPTY_BLOCK);\n      return;\n    }\n\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits = typeof this.params[key] !== 'number'\n        ? zlib.Z_DEFAULT_WINDOWBITS\n        : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw(\n        Object.assign(\n          // TODO deprecate memLevel/level and recommend zlibDeflateOptions instead\n          {\n            memLevel: this._options.memLevel,\n            level: this._options.level\n          },\n          this._options.zlibDeflateOptions,\n          { windowBits }\n        )\n      );\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // `zlib.DeflateRaw` emits an `'error'` event only when an attempt to use\n      // it is made after it has already been closed. This cannot happen here,\n      // so we only add a listener for the `'data'` event.\n      //\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kWriteInProgress] = true;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      var data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      if (\n        (fin && this.params[`${endpoint}_no_context_takeover`]) ||\n        this._deflate[kPendingClose]\n      ) {\n        this._deflate.close();\n        this._deflate = null;\n      } else {\n        this._deflate[kWriteInProgress] = false;\n        this._deflate[kTotalLength] = 0;\n        this._deflate[kBuffers] = [];\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData (chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData (chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError][constants.kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError (err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[constants.kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst stream = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst bufferUtil = require('./buffer-util');\nconst validation = require('./validation');\nconst constants = require('./constants');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends stream.Writable\n */\nclass Receiver extends stream.Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} binaryType The type for binary data\n   * @param {Object} extensions An object containing the negotiated extensions\n   * @param {Number} maxPayload The maximum allowed message length\n   */\n  constructor (binaryType, extensions, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || constants.BINARY_TYPES[0];\n    this[constants.kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   */\n  _write (chunk, encoding, cb) {\n    if (this._opcode === 0x08) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume (n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n\n      if (n >= buf.length) {\n        this._buffers.shift().copy(dst, dst.length - n);\n      } else {\n        buf.copy(dst, dst.length - n, 0, n);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop (cb) {\n    var err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default: // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo () {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(RangeError, 'RSV2 and RSV3 must be clear', true, 1002);\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(RangeError, 'RSV1 must be clear', true, 1002);\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(RangeError, 'invalid opcode 0', true, 1002);\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(RangeError, 'FIN must be set', true, 1002);\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16 () {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64 () {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength () {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(RangeError, 'Max payload size exceeded', false, 1009);\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask () {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData (cb) {\n    var data = constants.EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) bufferUtil.unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress (data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(error(RangeError, 'Max payload size exceeded', false, 1009));\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage () {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        var data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = toBuffer(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(toBuffer(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = toBuffer(fragments, messageLength);\n\n        if (!validation.isValidUTF8(buf)) {\n          this._loop = false;\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage (data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(RangeError, 'invalid payload length 1', true, 1002);\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!validation.isValidStatusCode(code)) {\n          return error(RangeError, `invalid status code ${code}`, true, 1002);\n        }\n\n        const buf = data.slice(2);\n\n        if (!validation.isValidUTF8(buf)) {\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n\n      return;\n    }\n\n    if (this._opcode === 0x09) this.emit('ping', data);\n    else this.emit('pong', data);\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {(Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error (ErrorCtor, message, prefix, statusCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err[constants.kStatusCode] = statusCode;\n  return err;\n}\n\n/**\n * Makes a buffer from a list of fragments.\n *\n * @param {Buffer[]} fragments The list of fragments composing the message\n * @param {Number} messageLength The length of the message\n * @return {Buffer}\n * @private\n */\nfunction toBuffer (fragments, messageLength) {\n  if (fragments.length === 1) return fragments[0];\n  if (fragments.length > 1) return bufferUtil.concat(fragments, messageLength);\n  return constants.EMPTY_BUFFER;\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n */\nfunction toArrayBuffer (buf) {\n  if (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n","'use strict';\n\nconst crypto = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst bufferUtil = require('./buffer-util');\nconst validation = require('./validation');\nconst constants = require('./constants');\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {net.Socket} socket The connection socket\n   * @param {Object} extensions An object containing the negotiated extensions\n   */\n  constructor (socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} options.readOnly Specifies whether `data` can be modified\n   * @param {Boolean} options.fin Specifies whether or not to set the FIN bit\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Boolean} options.rsv1 Specifies whether or not to set the RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame (data, options) {\n    const merge = data.length < 1024 || (options.mask && options.readOnly);\n    var offset = options.mask ? 6 : 2;\n    var payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) {\n      target[1] = payloadLength;\n      if (merge) {\n        data.copy(target, offset);\n        return [target];\n      }\n\n      return [target, data];\n    }\n\n    const mask = crypto.randomBytes(4);\n\n    target[1] = payloadLength | 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      bufferUtil.mask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    bufferUtil.mask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {(Number|undefined)} code The status code component of the body\n   * @param {String} data The message component of the body\n   * @param {Boolean} mask Specifies whether or not to mask the message\n   * @param {Function} cb Callback\n   * @public\n   */\n  close (code, data, mask, cb) {\n    var buf;\n\n    if (code === undefined) {\n      buf = constants.EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !validation.isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      buf = Buffer.allocUnsafe(2 + Buffer.byteLength(data));\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback\n   * @private\n   */\n  doClose (data, mask, cb) {\n    this.sendFrame(Sender.frame(data, {\n      fin: true,\n      rsv1: false,\n      opcode: 0x08,\n      mask,\n      readOnly: false\n    }), cb);\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback\n   * @public\n   */\n  ping (data, mask, cb) {\n    var readOnly = true;\n\n    if (!Buffer.isBuffer(data)) {\n      if (data instanceof ArrayBuffer) {\n        data = Buffer.from(data);\n      } else if (ArrayBuffer.isView(data)) {\n        data = viewToBuffer(data);\n      } else {\n        data = Buffer.from(data);\n        readOnly = false;\n      }\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, data, mask, readOnly, cb]);\n    } else {\n      this.doPing(data, mask, readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Boolean} readOnly Specifies whether `data` can be modified\n   * @param {Function} cb Callback\n   * @private\n   */\n  doPing (data, mask, readOnly, cb) {\n    this.sendFrame(Sender.frame(data, {\n      fin: true,\n      rsv1: false,\n      opcode: 0x09,\n      mask,\n      readOnly\n    }), cb);\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback\n   * @public\n   */\n  pong (data, mask, cb) {\n    var readOnly = true;\n\n    if (!Buffer.isBuffer(data)) {\n      if (data instanceof ArrayBuffer) {\n        data = Buffer.from(data);\n      } else if (ArrayBuffer.isView(data)) {\n        data = viewToBuffer(data);\n      } else {\n        data = Buffer.from(data);\n        readOnly = false;\n      }\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, data, mask, readOnly, cb]);\n    } else {\n      this.doPong(data, mask, readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Boolean} readOnly Specifies whether `data` can be modified\n   * @param {Function} cb Callback\n   * @private\n   */\n  doPong (data, mask, readOnly, cb) {\n    this.sendFrame(Sender.frame(data, {\n      fin: true,\n      rsv1: false,\n      opcode: 0x0a,\n      mask,\n      readOnly\n    }), cb);\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} options.compress Specifies whether or not to compress `data`\n   * @param {Boolean} options.binary Specifies whether `data` is binary or text\n   * @param {Boolean} options.fin Specifies whether the fragment is the last one\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback\n   * @public\n   */\n  send (data, options, cb) {\n    var opcode = options.binary ? 2 : 1;\n    var rsv1 = options.compress;\n    var readOnly = true;\n\n    if (!Buffer.isBuffer(data)) {\n      if (data instanceof ArrayBuffer) {\n        data = Buffer.from(data);\n      } else if (ArrayBuffer.isView(data)) {\n        data = viewToBuffer(data);\n      } else {\n        data = Buffer.from(data);\n        readOnly = false;\n      }\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = data.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n      } else {\n        this.dispatch(data, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(Sender.frame(data, {\n        fin: options.fin,\n        rsv1: false,\n        opcode,\n        mask: options.mask,\n        readOnly\n      }), cb);\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} compress Specifies whether or not to compress `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} options.readOnly Specifies whether `data` can be modified\n   * @param {Boolean} options.fin Specifies whether or not to set the FIN bit\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Boolean} options.rsv1 Specifies whether or not to set the RSV1 bit\n   * @param {Function} cb Callback\n   * @private\n   */\n  dispatch (data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this._deflating = false;\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue () {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      params[0].apply(this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue (params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} cb Callback\n   * @private\n   */\n  sendFrame (list, cb) {\n    if (list.length === 2) {\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Converts an `ArrayBuffer` view into a buffer.\n *\n * @param {(DataView|TypedArray)} view The view to convert\n * @return {Buffer} Converted view\n * @private\n */\nfunction viewToBuffer (view) {\n  const buf = Buffer.from(view.buffer);\n\n  if (view.byteLength !== view.buffer.byteLength) {\n    return buf.slice(view.byteOffset, view.byteOffset + view.byteLength);\n  }\n\n  return buf;\n}\n","'use strict';\n\ntry {\n  const isValidUTF8 = require('utf-8-validate');\n\n  exports.isValidUTF8 = typeof isValidUTF8 === 'object'\n    ? isValidUTF8.Validation.isValidUTF8 // utf-8-validate@<3.0.0\n    : isValidUTF8;\n} catch (e) /* istanbul ignore next */ {\n  exports.isValidUTF8 = () => true;\n}\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nexports.isValidStatusCode = (code) => {\n  return (\n    (code >= 1000 &&\n      code <= 1013 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n};\n","'use strict';\n\nconst EventEmitter = require('events');\nconst crypto = require('crypto');\nconst http = require('http');\nconst url = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst extension = require('./extension');\nconst constants = require('./constants');\nconst WebSocket = require('./websocket');\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {String} options.host The hostname where to bind the server\n   * @param {Number} options.port The port where to bind the server\n   * @param {http.Server} options.server A pre-created HTTP/S server to use\n   * @param {Function} options.verifyClient An hook to reject connections\n   * @param {Function} options.handleProtocols An hook to handle protocols\n   * @param {String} options.path Accept only connections matching this path\n   * @param {Boolean} options.noServer Enable no server mode\n   * @param {Boolean} options.clientTracking Specifies whether or not to track clients\n   * @param {(Boolean|Object)} options.perMessageDeflate Enable/disable permessage-deflate\n   * @param {Number} options.maxPayload The maximum allowed message size\n   * @param {Function} callback A listener for the `listening` event\n   */\n  constructor (options, callback) {\n    super();\n\n    options = Object.assign({\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null\n    }, options);\n\n    if (options.port == null && !options.server && !options.noServer) {\n      throw new TypeError(\n        'One of the \"port\", \"server\", or \"noServer\" options must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(options.port, options.host, options.backlog, callback);\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, (ws) => {\n            this.emit('connection', ws, req);\n          });\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address () {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} cb Callback\n   * @public\n   */\n  close (cb) {\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) return server.close(cb);\n    }\n\n    if (cb) cb();\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle (req) {\n    if (this.options.path && url.parse(req.url).pathname !== this.options.path) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade (req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' || req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !req.headers['sec-websocket-key'] || (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(\n          req.headers['sec-websocket-extensions']\n        );\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin: req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.connection.authorized || req.connection.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @private\n   */\n  completeUpgrade (extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    const key = crypto.createHash('sha1')\n      .update(req.headers['sec-websocket-key'] + constants.GUID, 'binary')\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${key}`\n    ];\n\n    const ws = new WebSocket(null);\n    var protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.trim().split(/ *, */);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws.protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when called\n * @private\n */\nfunction addListeners (server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners () {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError () {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {net.Socket} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake (socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = Object.assign({\n      'Connection': 'close',\n      'Content-type': 'text/html',\n      'Content-Length': Buffer.byteLength(message)\n    }, headers);\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers).map(h => `${h}: ${headers[h]}`).join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n","'use strict';\n\nconst EventEmitter = require('events');\nconst crypto = require('crypto');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst url = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst EventTarget = require('./event-target');\nconst extension = require('./extension');\nconst constants = require('./constants');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst kWebSocket = constants.kWebSocket;\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000; // Allow 30 seconds to terminate the connection cleanly.\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|url.Url|url.URL)} address The URL to which to connect\n   * @param {(String|String[])} protocols The subprotocols\n   * @param {Object} options Connection options\n   */\n  constructor (address, protocols, options) {\n    super();\n\n    this.readyState = WebSocket.CONNECTING;\n    this.protocol = '';\n\n    this._binaryType = constants.BINARY_TYPES[0];\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._closeCode = 1006;\n    this._extensions = {};\n    this._isServer = true;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient.call(this, address, protocols, options);\n    }\n  }\n\n  get CONNECTING () { return WebSocket.CONNECTING; }\n  get CLOSING () { return WebSocket.CLOSING; }\n  get CLOSED () { return WebSocket.CLOSED; }\n  get OPEN () { return WebSocket.OPEN; }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the required\n   * default \"blob\" type (instead we define a custom \"nodebuffer\" type).\n   *\n   * @type {String}\n   */\n  get binaryType () {\n    return this._binaryType;\n  }\n\n  set binaryType (type) {\n    if (constants.BINARY_TYPES.indexOf(type) < 0) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount () {\n    if (!this._socket) return 0;\n\n    //\n    // `socket.bufferSize` is `undefined` if the socket is closed.\n    //\n    return (this._socket.bufferSize || 0) + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions () {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} maxPayload The maximum allowed message size\n   * @private\n   */\n  setSocket (socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this._binaryType,\n      this._extensions,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this.readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose () {\n    this.readyState = WebSocket.CLOSED;\n\n    if (!this._socket) {\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} code Status code explaining why the connection is closing\n   * @param {String} data A string explaining why the connection is closing\n   * @public\n   */\n  close (code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (this._closeFrameSent && this._closeFrameReceived) this._socket.end();\n      return;\n    }\n\n    this.readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (this._socket.writable) {\n        if (this._closeFrameReceived) this._socket.end();\n\n        //\n        // Ensure that the connection is closed even if the closing handshake\n        // fails.\n        //\n        this._closeTimer = setTimeout(\n          this._socket.destroy.bind(this._socket),\n          closeTimeout\n        );\n      }\n    });\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} data The data to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when the ping is sent\n   * @public\n   */\n  ping (data, mask, cb) {\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      const err = new Error(\n        `WebSocket is not open: readyState ${this.readyState} ` +\n          `(${readyStates[this.readyState]})`\n      );\n\n      if (cb) return cb(err);\n      throw err;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || constants.EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} data The data to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when the pong is sent\n   * @public\n   */\n  pong (data, mask, cb) {\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      const err = new Error(\n        `WebSocket is not open: readyState ${this.readyState} ` +\n          `(${readyStates[this.readyState]})`\n      );\n\n      if (cb) return cb(err);\n      throw err;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || constants.EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} options.compress Specifies whether or not to compress `data`\n   * @param {Boolean} options.binary Specifies whether `data` is binary or text\n   * @param {Boolean} options.fin Specifies whether the fragment is the last one\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when data is written out\n   * @public\n   */\n  send (data, options, cb) {\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      const err = new Error(\n        `WebSocket is not open: readyState ${this.readyState} ` +\n          `(${readyStates[this.readyState]})`\n      );\n\n      if (cb) return cb(err);\n      throw err;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    const opts = Object.assign({\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true\n    }, options);\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || constants.EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate () {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this.readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\nreadyStates.forEach((readyState, i) => {\n  WebSocket[readyStates[i]] = i;\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    /**\n     * Return the listener of the event.\n     *\n     * @return {(Function|undefined)} The event listener or `undefined`\n     * @public\n     */\n    get () {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n    },\n    /**\n     * Add a listener for the event.\n     *\n     * @param {Function} listener The listener to add\n     * @public\n     */\n    set (listener) {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = EventTarget.addEventListener;\nWebSocket.prototype.removeEventListener = EventTarget.removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {(String|url.Url|url.URL)} address The URL to which to connect\n * @param {String} protocols The subprotocols\n * @param {Object} options Connection options\n * @param {(Boolean|Object)} options.perMessageDeflate Enable/disable permessage-deflate\n * @param {Number} options.handshakeTimeout Timeout in milliseconds for the handshake request\n * @param {Number} options.protocolVersion Value of the `Sec-WebSocket-Version` header\n * @param {String} options.origin Value of the `Origin` or `Sec-WebSocket-Origin` header\n * @private\n */\nfunction initAsClient (address, protocols, options) {\n  options = Object.assign({\n    protocolVersion: protocolVersions[1],\n    perMessageDeflate: true\n  }, options, {\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    auth: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  });\n\n  if (protocolVersions.indexOf(options.protocolVersion) === -1) {\n    throw new RangeError(\n      `Unsupported protocol version: ${options.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  this._isServer = false;\n\n  var parsedUrl;\n\n  if (typeof address === 'object' && address.href !== undefined) {\n    parsedUrl = address;\n    this.url = address.href;\n  } else {\n    parsedUrl = url.parse(address);\n    this.url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    throw new Error(`Invalid URL: ${this.url}`);\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const key = crypto.randomBytes(16).toString('base64');\n  const httpObj = isSecure ? https : http;\n  const path = parsedUrl.search\n    ? `${parsedUrl.pathname || '/'}${parsedUrl.search}`\n    : parsedUrl.pathname || '/';\n  var perMessageDeflate;\n\n  options.createConnection = isSecure ? tlsConnect : netConnect;\n  options.port = parsedUrl.port || (isSecure ? 443 : 80);\n  options.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  options.headers = Object.assign({\n    'Sec-WebSocket-Version': options.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    'Connection': 'Upgrade',\n    'Upgrade': 'websocket'\n  }, options.headers);\n  options.path = path;\n\n  if (options.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      options.perMessageDeflate !== true ? options.perMessageDeflate : {},\n      false\n    );\n    options.headers['Sec-WebSocket-Extensions'] = extension.format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    options.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (options.origin) {\n    if (options.protocolVersion < 13) {\n      options.headers['Sec-WebSocket-Origin'] = options.origin;\n    } else {\n      options.headers.Origin = options.origin;\n    }\n  }\n  if (parsedUrl.auth) {\n    options.auth = parsedUrl.auth;\n  } else if (parsedUrl.username || parsedUrl.password) {\n    options.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = path.split(':');\n\n    if (options.agent == null && process.versions.modules < 57) {\n      //\n      // Setting `socketPath` in conjunction with `createConnection` without an\n      // agent throws an error on Node.js < 8. Work around the issue by using a\n      // different property.\n      //\n      options._socketPath = parts[0];\n    } else {\n      options.socketPath = parts[0];\n    }\n\n    options.path = parts[1];\n  }\n\n  var req = this._req = httpObj.get(options);\n\n  if (options.handshakeTimeout) {\n    req.setTimeout(\n      options.handshakeTimeout,\n      () => abortHandshake(this, req, 'Opening handshake has timed out')\n    );\n  }\n\n  req.on('error', (err) => {\n    if (this._req.aborted) return;\n\n    req = this._req = null;\n    this.readyState = WebSocket.CLOSING;\n    this.emit('error', err);\n    this.emitClose();\n  });\n\n  req.on('response', (res) => {\n    if (this.emit('unexpected-response', req, res)) return;\n\n    abortHandshake(this, req, `Unexpected server response: ${res.statusCode}`);\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    this.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (this.readyState !== WebSocket.CONNECTING) return;\n\n    req = this._req = null;\n\n    const digest = crypto.createHash('sha1')\n      .update(key + constants.GUID, 'binary')\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(this, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    var protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && protList.indexOf(serverProt) === -1) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(this, socket, protError);\n      return;\n    }\n\n    if (serverProt) this.protocol = serverProt;\n\n    if (perMessageDeflate) {\n      try {\n        const extensions = extension.parse(\n          res.headers['sec-websocket-extensions']\n        );\n\n        if (extensions[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(\n            extensions[PerMessageDeflate.extensionName]\n          );\n          this._extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        abortHandshake(this, socket, 'Invalid Sec-WebSocket-Extensions header');\n        return;\n      }\n    }\n\n    this.setSocket(socket, head, 0);\n  });\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect (options) {\n  options.path = options.socketPath || options._socketPath || undefined;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect (options) {\n  options.path = options.socketPath || options._socketPath || undefined;\n  options.servername = options.servername || options.host;\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket)} stream The request to abort or the\n *     socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake (websocket, stream, message) {\n  websocket.readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude (code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n  websocket._socket.resume();\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain () {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError (err) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n\n  websocket.readyState = WebSocket.CLOSING;\n  websocket._closeCode = err[constants.kStatusCode];\n  websocket.emit('error', err);\n  websocket._socket.destroy();\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish () {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage (data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing (data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, constants.NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong (data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose () {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('end', socketOnEnd);\n\n  websocket.readyState = WebSocket.CLOSING;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk and emitted synchronously in a single\n  // `'data'` event.\n  //\n  websocket._socket.read();\n  websocket._receiver.end();\n\n  this.removeListener('data', socketOnData);\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData (chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd () {\n  const websocket = this[kWebSocket];\n\n  websocket.readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError () {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', constants.NOOP);\n\n  if (websocket) {\n    websocket.readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","import Wallet from './wallet.js';\nimport Messaging from './messaging.js';\nimport Connection from './connection.js';\n\nclass ConnectionHandler {\n  constructor(connection) {\n    this._connection = connection;\n  }\n  get token() {\n    return this._connection.token;\n  }\n  /**\n   * Close the web-socket connection.\n   */\n  deregister() {\n    this._connection.close();\n  }\n  /**\n   * Return a Wallet instance.\n   * @returns {Wallet}\n   */\n  getWallet() {\n    if (this._connection) {\n      return new Wallet(this._connection);\n    }\n    return null;\n  }\n  /**\n   * Return a Messaging instance.\n   * @returns {Messaging}\n   */\n  getMessaging() {\n    if (this._connection) {\n      return new Messaging(this._connection);\n    }\n    return null;\n  }\n  /**\n   * Get the address of the current wallet.\n   * @returns {Subject}\n   */\n  getAddress() {\n    // Method: 'address'\n    // Permissions: ['address']\n    const params = {};\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'address',\n      'params': params,\n      'id': 1\n    });\n\n    return this._connection.getAddress;\n  }\n}\n\n/**\n * Register an App.\n * @param {string} name - App's name.\n * @param {string} description -  App's description.\n * @param {string[]} permissions -  Permissions requested by this App.\n * @returns {Promise}\n */\nfunction registerApp(name, description, permissions) {\n  const CONNECTION = new Connection();\n\n  return new Promise((resolve, reject) => {\n    CONNECTION.register(name, description, permissions)\n      .then(() => resolve(new ConnectionHandler(CONNECTION)))\n      .catch((error) => reject(error));\n  });\n}\n\n/**\n * Re-connects an App with a valid token.\n * @param {string} token - Auth token.\n * @returns {Promise}\n */\nfunction connectApp(token) {\n  const CONNECTION = new Connection();\n\n  return new Promise((resolve, reject) => {\n    CONNECTION.connect(token)\n      .then(() => resolve(new ConnectionHandler(CONNECTION)))\n      .catch((error) => reject(error));\n  });\n}\n\nexport default { registerApp, connectApp };\n","import { Subject } from 'rxjs/Subject';\n\nconst WS = global.WebSocket || global.MozWebSocket || require('ws');\n\nclass Queue extends Subject {\n  constructor() {\n    super();\n    this._items = [];\n  }\n  add(item) {\n    if (this.observers.length > 0) {\n      this.next(item);\n    } else {\n      this._items.push(item);\n    }\n  }\n  subscribe(observer) {\n    let s = super.subscribe(observer);\n\n    this._items.forEach(item => this.next(item));\n    this._items = [];\n    return s;\n  }\n};\n\nexport default class Connection {\n  constructor() {\n    this._token = new Subject();\n    this._messages = new Queue();\n\n    this._getAddress = new Subject();\n    this._getBalance = new Subject();\n    this._sendTransaction = new Subject();\n    this._getTransactions = new Subject();\n    this._sendMessage = new Subject();\n    this._getMessages = new Subject();\n    this._sendApplicationMessage = new Subject();\n    this._getApplicationMessages = new Subject();\n  }\n  get getAddress() {\n    return this._getAddress;\n  }\n  get getBalance() {\n    return this._getBalance;\n  }\n  get sendTransaction() {\n    return this._sendTransaction;\n  }\n  get getTransactions() {\n    return this._getTransactions;\n  }\n  get sendMessage() {\n    return this._sendMessage;\n  }\n  get getMessages() {\n    return this._getMessages;\n  }\n  get sendApplicationMessage() {\n    return this._sendApplicationMessage;\n  }\n  get getApplicationMessages() {\n    return this._getApplicationMessages;\n  }\n  get token() {\n    return this._tokenValue;\n  }\n  register(name, description, permissions) {\n    const request = JSON.stringify({\n      jsonrpc: '2.0',\n      method: 'register',\n      params: {\n        'name': name,\n        'description': description,\n        'permissions': permissions\n      },\n      id: 0\n    });\n\n    return new Promise((resolve, reject) => {\n      this._socket = new WS('ws://localhost:54345');\n      this._socket.onopen = () => this.handleOpen(request, resolve, reject);\n      this._socket.onmessage = (evt) => this.handleResponse(evt.data);\n      this._socket.onerror = (error) => reject(`WebSocket Error: ${JSON.stringify(error)}`);\n      this._socket.onclose = () => this.handleClose();\n    });\n  }\n  connect(token) {\n    const request = JSON.stringify({\n      jsonrpc: '2.0',\n      method: 'ping',\n      params: {\n        'token': token\n      },\n      id: 9\n    });\n\n    this._tokenValue = token;\n\n    return new Promise((resolve, reject) => {\n      this._socket = new WS('ws://localhost:54345');\n      this._socket.onopen = () => this.handleOpen(request, resolve, reject);\n      this._socket.onmessage = (evt) => this.handleResponse(evt.data);\n      this._socket.onerror = (error) => reject(`WebSocket Error: ${JSON.stringify(error)}`);\n      this._socket.onclose = () => this.handleClose();\n    });\n  }\n  handleOpen(request, resolve, reject) {\n    this._socket.send(request);\n    this._token.subscribe(\n      token => {\n        resolve();\n        this._tokenValue = token;\n        this._messages.subscribe(message => {\n          message.params.token = token;\n          message = JSON.stringify(message);\n          this._socket.send(message);\n        });\n      },\n      error => reject(error)\n    );\n  }\n  handleResponse(response) {\n    response = JSON.parse(response);\n    if (response.hasOwnProperty('result') || response.hasOwnProperty('params')) {\n      this.getResponse(response);\n    } else {\n      this.getError(response);\n    }\n  }\n  getResponse(response) {\n    switch (response.id) {\n      case 0: // register\n        this._token.next(response.result.token);\n        break;\n      case 1: // getAddress\n        this._getAddress.next(response.result);\n        break;\n      case 2: // getBalance\n      case 4: // getTransactions\n      case 6: // getMessages\n      case 8: // getApplicationMessages\n        // console.log(response.result);\n        break;\n      case 3: // sendTransaction\n        this._sendTransaction.next(response.result);\n        break;\n      case 5: // sendMessage\n        this._sendMessage.next(response.result);\n        break;\n      case 7: // sendApplicationMessage\n        this._sendApplicationMessage.next(response.result);\n        break;\n      case 9: // connect\n        this._token.next(this._tokenValue);\n        break;\n      default:\n        switch (response.method) {\n          case 'balance.update':\n            this._getBalance.next(response.params.TEST);\n            break;\n          case 'transaction.update':\n            this._getTransactions.next(response.params);\n            break;\n          case 'message.update':\n            this._getMessages.next(response.params);\n            break;\n          case 'application_message.update':\n            this._getApplicationMessages.next(response.params);\n            break;\n          default:\n            console.log('The method is not supported');\n            break;\n        }\n        break;\n    }\n  }\n  getError(response) {\n    switch (response.id) {\n      case 0: // register\n        this._token.error(response.error);\n        break;\n      case 1: // getAddress\n        this._getAddress.error(response.error);\n        break;\n      case 2: // getBalance\n      case 4: // getTransactions\n      case 6: // getMessages\n      case 8: // getApplicationMessages\n        // console.log(response.result);\n        break;\n      case 3: // sendTransaction\n        this._sendTransaction.error(response.error);\n        break;\n      case 5: // sendMessage\n        this._sendMessage.error(response.error);\n        break;\n      case 7: // sendApplicationMessage\n        this._sendApplicationMessage.error(response.error);\n        break;\n      case 9: // connect\n        this._token.error(response.error);\n        break;\n      default:\n        console.log('The method is not supported');\n        break;\n    }\n  }\n  handleClose() {\n    this._token.unsubscribe();\n    this._messages.unsubscribe();\n  }\n  pushRequest(request) {\n    this._messages.add(request);\n  }\n  close() {\n    setTimeout(() => {\n      if (this._socket.readyState === 1) {\n        this._socket.close();\n      }\n    }, 2000);\n  }\n}\n","import { registerApp, connectApp } from './connection-handler.js';\n\nexport default { registerApp, connectApp };\n","export default class Messaging {\n  constructor(connection) {\n    this._connection = connection;\n  }\n  /**\n   * Send a message.\n   * @param {string} recipient - Destination address.\n   * @param {string} message -  Message to be sent.\n   * @returns {Subject}\n   */\n  sendMessage(recipient, message) {\n    // Method: 'send_message'\n    // Permissions: ['send_messages']\n    const params = {\n      'recipient': recipient,\n      'message': message\n    };\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'send_message',\n      'params': params,\n      'id': 5\n    });\n\n    return this._connection.sendMessage;\n  }\n  /**\n   * Get old and future messages.\n   * @returns {Subject}\n   */\n  getMessages() {\n    // Method: 'messages'\n    // Permissions: ['messages']\n    const params = {};\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'messages',\n      'params': params,\n      'id': 6\n    });\n\n    return this._connection.getMessages;\n  }\n  /**\n   * Send an application message.\n   * @param {string} applicationId - The application id.\n   * @param {string[]} recipients - Destination addresses.\n   * @param {Object} payload - Custom message.\n   * @returns {Subject}\n   */\n  sendApplicationMessage(applicationId, recipients, payload, encrypted) {\n    // Method: 'send_application_message'\n    // Permissions: ['send_application_messages']\n    const params = {\n      'application_id': applicationId,\n      'recipients': recipients,\n      'payload': payload,\n      'encrypted': encrypted\n    };\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'send_application_message',\n      'params': params,\n      'id': 7\n    });\n\n    return this._connection.sendApplicationMessage;\n  }\n  /**\n   * Gets old and future application messages for a given application id.\n   * @param {string} applicationId - The application id.\n   * @returns {Subject}\n   */\n  getApplicationMessages(applicationId) {\n    // Method: 'application_messages'\n    // Permissions: ['application_messages']\n    const params = {\n      'application_id': applicationId\n    };\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'application_messages',\n      'params': params,\n      'id': 8\n    });\n\n    return this._connection.getApplicationMessages;\n  }\n}\n","export default class Wallet {\n  constructor(connection) {\n    this._connection = connection;\n  }\n  /**\n   * Get the balance.\n   * @returns {Subject}\n   */\n  getBalance() {\n    // Method: 'balance'\n    // Permissions: ['balance']\n    const params = {};\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'balance',\n      'params': params,\n      'id': 2\n    });\n\n    return this._connection.getBalance;\n  }\n  /**\n   * Send a transaction.\n   * @param {string} recipient - Destination address.\n   * @param {string} asset -  Asset ISO.\n   * @param {number} quantity - Amount to be sent (up to 5 decimals).\n   * @returns {Subject}\n   */\n  sendTransaction(recipient, asset, quantity, message) {\n    // Method: 'send_transaction'\n    // Permisions: ['send_transactions']\n    const params = {\n      'recipient': recipient,\n      'asset': asset,\n      'quantity': quantity,\n      'message': message\n    };\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'send_transaction',\n      'params': params,\n      'id': 3\n    });\n\n    return this._connection.sendTransaction;\n  }\n  /**\n   * Get old and future transactions.\n   * @returns {Subject}\n   */\n  getTransactions() {\n    // Method: 'transactions'\n    // Permissions: ['transactions']\n    const params = {};\n\n    this._connection.pushRequest({\n      'jsonrpc': '2.0',\n      'method': 'transactions',\n      'params': params,\n      'id': 4\n    });\n\n    return this._connection.getTransactions;\n  }\n}\n","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"zlib\");"],"sourceRoot":""}